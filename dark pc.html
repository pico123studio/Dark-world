<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dark PC</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            overflow: hidden; /* Scrollbar olmasƒ±n */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh; /* Minimum ekran y√ºksekliƒüi */
            background-image: url('https://upload.wikimedia.org/wikipedia/commons/e/e4/Windows_10_Default_Background.jpg');
            background-size: cover; /* T√ºm alanƒ± kaplasƒ±n */
            background-position: center; /* Ortalanmƒ±≈ü arka plan */
            background-repeat: no-repeat; /* Tekrarlamasƒ±n */
            background-attachment: fixed; /* Arka plan sabit kalsƒ±n */
            position: relative; /* Uygulama ikonlarƒ± i√ßin */
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* Varsayƒ±lan font */
        }

        /* Ba≈ülatma Ekranƒ± (Start Screen) */
        #start-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: #00008b; /* Mavi ekran */
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            z-index: 1000;
        }

        #start-screen h1 {
            font-size: 5em;
            margin-bottom: 50px;
            text-shadow: 4px 4px 10px rgba(0, 0, 0, 0.7);
        }

        #start-button {
            padding: 20px 60px;
            font-size: 2em;
            background-color: #008000; /* Ye≈üil buton */
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }

        #start-button:hover {
            background-color: #006400;
            transform: translateY(-3px);
        }
        #start-button:active {
            transform: translateY(0);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
        }

        /* Y√ºklenme Ekranƒ± (Loading Screen) - CMD Tarzƒ± */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.98); /* Daha koyu arka plan */
            color: lime; /* CMD ye≈üili */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-family: 'Press Start 2P', cursive; /* Retro font */
            font-size: 1.5em; /* Biraz k√º√ß√ºlt√ºld√º */
            z-index: 1010; /* Ba≈ülat ekranƒ±nƒ±n √ºst√ºnde, masa√ºst√ºn√ºn altƒ±nda */
            display: none; /* Ba≈ülangƒ±√ßta gizli */
            text-align: center;
        }

        #loading-text-container {
            margin-bottom: 20px;
        }

        #loading-bar-container {
            width: 80%;
            max-width: 500px;
            height: 30px;
            border: 2px solid lime;
            background-color: #333;
            margin-top: 20px;
            overflow: hidden;
            position: relative;
        }

        #loading-bar {
            height: 100%;
            width: 0%;
            background-color: lime;
            transition: width 0.1s linear;
        }

        #loading-percentage {
            position: absolute;
            width: 100%;
            text-align: center;
            top: 50%;
            transform: translateY(-50%);
            color: black; /* Y√ºzdenin rengi */
            font-size: 0.8em;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* Y√ºzde i√ßin daha okunaklƒ± font */
        }

        /* Ana Masa√ºst√º ƒ∞√ßeriƒüi */
        #main-desktop {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: none; /* Ba≈ülangƒ±√ßta gizli, ba≈ülat ekranƒ±ndan sonra g√∂sterilecek */
        }

        /* Alt √áubuk (Taskbar) */
        #taskbar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 40px; /* Daha belirgin bir y√ºkseklik */
            background-color: rgba(0, 0, 0, 0.8); /* Yarƒ± ≈üeffaf siyah */
            border-top: 1px solid #333;
            display: flex;
            justify-content: flex-end; /* ƒ∞√ßeriƒüi saƒüa hizala */
            align-items: center;
            padding: 0 15px; /* Yanlardan bo≈üluk */
            box-sizing: border-box; /* Padding dahil geni≈ülik */
            z-index: 999; /* En √ºstte olsun ama ba≈ülat ekranƒ±nƒ±n altƒ±nda */
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 0.9em;
        }

        #current-time {
            padding: 5px 10px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            margin-left: 10px; /* Saatin solunda bo≈üluk */
        }

        /* CMD Penceresi */
        #cmd-window {
            width: 90vw;
            height: 90vh;
            max-width: 1200px;
            max-height: 800px;
            background-color: #000000;
            color: lime;
            font-family: 'Courier New', Courier, monospace;
            font-size: 1.1em;
            border: 1px solid #3A3A3A;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            resize: both;
            overflow: hidden;
            position: relative;
            display: none; /* Ba≈ülangƒ±√ßta gizli */
            left: 50%; /* Ortala */
            top: 50%;
            transform: translate(-50%, -50%); /* Ortala */
        }

        #title-bar {
            background-color: #323232;
            color: #FFFFFF;
            padding: 8px 12px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 0.9em;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #505050;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            cursor: default;
        }

        #title-text {
            font-weight: bold;
            display: flex;
            align-items: center;
        }

        #window-controls {
            display: flex;
            gap: 1px;
        }

        .control-button {
            width: 45px;
            height: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #FFFFFF;
            font-size: 1.2em;
            cursor: default;
            transition: background-color 0.1s ease;
        }
        .control-button:hover {
            background-color: #404040;
        }
        #close-button:hover {
            background-color: #E81123;
        }
        #close-button {
            color: white;
        }
        #minimize-button::after { content: '\2014'; }
        #maximize-button::after { content: '\25A1'; }
        #close-button::after { content: '\2715'; }

        #content {
            flex-grow: 1;
            padding: 10px 20px;
            overflow-y: auto;
            word-break: break-all;
            white-space: pre-wrap;
            position: relative;
        }

        #initial-message {
            /* Ba≈ülangƒ±√ßta g√∂r√ºn√ºr, spam ba≈ülayƒ±nca gizlenir */
            font-size: 1.3em;
            color: lime;
            text-align: left;
            z-index: 10;
            margin-bottom: 5px;
        }

        #output {
            /* Bu div sadece oyun ba≈üladƒ±ktan sonra g√∂r√ºn√ºr olacak */
        }

        .command-line { /* Yeni eklendi */
            display: flex;
            align-items: center;
            margin-top: 5px;
            margin-bottom: 5px;
        }

        .command-line .prompt { /* Yeni eklendi */
            color: lime;
            margin-right: 5px;
        }

        .cmd-input { /* Yeni eklendi */
            flex-grow: 1;
            background: none;
            border: none;
            color: lime;
            font-family: 'Courier New', Courier, monospace;
            font-size: 1.1em;
            outline: none;
            display: none; /* Ba≈ülangƒ±√ßta gizli */
        }

        #kill-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            font-size: 3em;
            font-weight: bold;
            color: red;
            display: none;
            text-shadow: 0 0 10px red, 0 0 20px red, 0 0 30px red, 0 0 40px red;
            animation: pulse 1.5s infinite alternate;
            z-index: 10;
        }

        @keyframes pulse {
            0% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        /* Uygulama ƒ∞konlarƒ± Konteyneri (Ana Ekran) */
        #app-icons-container {
            position: absolute;
            top: 20px; /* Saƒü √ºst k√∂≈üe */
            right: 20px;
            display: flex;
            flex-direction: column;
            align-items: flex-end; /* Saƒü tarafa hizala */
            z-index: 100; /* CMD penceresinin √ºst√ºnde olsun */
            gap: 15px; /* ƒ∞konlar arasƒ± bo≈üluk */
        }

        .app-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            text-align: center;
            color: white; /* ƒ∞kon metinlerinin rengi */
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 0.85em;
        }

        .app-icon-img {
            width: 60px;
            height: 60px;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 3em;
            color: white;
            font-weight: bold;
            line-height: 0.8;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .app-icon-img:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.6);
        }

        /* Dark PC ƒ∞konu (Eski Dark CMD) */
        #dark-pc-icon .app-icon-img {
            background-color: #000000; /* Siyah */
            border: 2px solid #0f0; /* Ye≈üil √ßer√ßeve */
            font-size: 1.5em; /* Metnin b√ºy√ºkl√ºƒü√º */
            line-height: 1;
        }
        #dark-pc-icon .app-icon-img::before {
            content: 'CMD'; /* CMD yazƒ±sƒ± */
            font-family: 'Press Start 2P', cursive;
        }

        /* Xbox ƒ∞konu */
        #xbox-icon .app-icon-img {
            background-color: #107C10; /* Xbox ye≈üili */
        }
        #xbox-icon .app-icon-img::before {
            content: 'X'; /* Basit bir X logosu */
        }

        /* Parkur Oyunu ƒ∞konu */
        #parkour-game-icon .app-icon-img {
            background-color: #8B4513; /* Kahverengi (Toprak rengi gibi) */
            font-size: 2em;
        }
        #parkour-game-icon .app-icon-img::before {
            content: 'üèÉ'; /* Ko≈üan adam emojisi */
        }

        /* Par√ßacƒ±k √á√∂z√ºc√º ƒ∞konu */
        #particle-solver-icon .app-icon-img {
            background-color: #00BFFF; /* A√ßƒ±k mavi */
            font-size: 2em;
        }
        #particle-solver-icon .app-icon-img::before {
            content: 'üß©'; /* Yapboz par√ßasƒ± emojisi */
        }

        /* Labirent Oyunu ƒ∞konu */
        #maze-game-icon .app-icon-img {
            background-color: #6a0dad; /* Mor bir pusula ikonu */
            font-size: 2em; /* Emojinin b√ºy√ºkl√ºƒü√º */
        }
        #maze-game-icon .app-icon-img::before {
            content: 'üß≠'; /* Pusula emojisi */
        }

        /* Hacker Ka√ßƒ±≈ü ƒ∞konu */
        #hacker-escape-icon .app-icon-img {
            background-color: #555; /* Gri tonu */
            font-size: 2em;
        }
        #hacker-escape-icon .app-icon-img::before {
            content: 'üëÆ'; /* Polis emojisi */
        }

        /* Paint ƒ∞konu */
        #paint-icon .app-icon-img {
            background-color: #B0B0B0; /* A√ßƒ±k gri */
            font-size: 2em;
            color: #333;
        }
        #paint-icon .app-icon-img::before {
            content: 'üé®'; /* Sanat paleti emojisi */
        }

        /* Not Defteri ƒ∞konu */
        #notepad-icon .app-icon-img {
            background-color: #F0F0F0; /* Beyaz */
            font-size: 2em;
            color: #333;
        }
        #notepad-icon .app-icon-img::before {
            content: 'üìù'; /* Not defteri emojisi */
        }

        /* Kart Oyunu ƒ∞konu */
        #card-game-icon .app-icon-img {
            background-color: #7B3F00; /* Kahverengi/Koyu turuncu */
            font-size: 2em;
            color: white;
        }
        #card-game-icon .app-icon-img::before {
            content: 'üÉè'; /* Joker kartƒ± emojisi */
        }


        /* Modallar (Uygulama Pencereleri) Ortak Stilleri */
        .modal-window {
            position: absolute;
            background-color: #2F2F2F; /* Koyu gri */
            border: 1px solid #555;
            border-radius: 8px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.8);
            display: none; /* Ba≈ülangƒ±√ßta gizli */
            flex-direction: column;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #E0E0E0;
            overflow: hidden; /* ƒ∞√ßerik ta≈ümasƒ±nƒ± engelle */
            z-index: 110; /* CMD penceresinin √ºst√ºnde olsun, √∂zel durumlarda deƒüi≈üebilir */
        }

        .modal-window .title-bar { /* Modallarƒ±n ba≈ülƒ±k √ßubuklarƒ± i√ßin genel stil */
            background-color: #1E1E1E;
            padding: 10px;
            border-bottom: 1px solid #444;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
            color: #C0C0C0;
            cursor: grab; /* Ta≈üƒ±ma imleci */
            user-select: none;
        }

        .modal-window .title-bar .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.2em;
            cursor: pointer;
            padding: 0 5px;
            transition: background-color 0.1s ease;
        }
        .modal-window .title-bar .close-btn:hover {
            background-color: #E81123;
        }

        /* Xbox Sohbet Penceresi */
        #xbox-chat-window {
            width: 350px;
            height: 400px;
            top: 100px;
            right: 20px;
        }

        #chat-messages {
            flex-grow: 1;
            padding: 10px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .message {
            max-width: 80%;
            padding: 8px 12px;
            border-radius: 15px;
        }

        .message.you {
            background-color: #0078D7; /* Mavi (Windows rengi) */
            align-self: flex-end;
            text-align: right;
            color: white;
        }

        .message.coolplayer {
            background-color: #3A3A3A; /* Koyu gri */
            align-self: flex-start;
            text-align: left;
            color: #E0E0E0;
        }
        #chat-input-container {
            padding: 10px;
            border-top: 1px solid #444;
            display: flex;
        }

        #chat-input {
            flex-grow: 1;
            padding: 8px;
            border: 1px solid #555;
            border-radius: 5px;
            background-color: #3A3A3A;
            color: #E0E0E0;
            outline: none;
        }
        #chat-input::placeholder {
            color: #A0A0A0;
        }

        #send-button {
            background-color: #107C10;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            margin-left: 10px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        #send-button:hover {
            background-color: #0A5A0A;
        }

        /* √á√∂kme Mesaj Kutusu (Xbox Penceresi √úst√ºnde) */
        #crash-message-box {
            width: 300px;
            /* Modal konumlandƒ±rma i√ßin modal-window'dan devralƒ±yor */
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #222; /* Koyu arka plan */
            text-align: center;
            padding: 20px;
            z-index: 120; /* Sohbet penceresinin √ºst√ºnde */
        }
        #crash-message-box h2 {
            color: red;
            margin-top: 0;
            margin-bottom: 15px;
        }
        #crash-message-box p {
            margin-bottom: 20px;
        }
        #crash-message-box button {
            background-color: #0078D7;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.2s ease;
        }
        #crash-message-box button:hover {
            background-color: #005A9C;
        }

        /* Parkur Oyunu Modal'ƒ± (Tam Ekran) */
        #parkour-game-modal {
            position: fixed; /* T√ºm ekranƒ± kaplasƒ±n */
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.9); /* Yarƒ± ≈üeffaf siyah arka plan */
            justify-content: center;
            align-items: center;
            z-index: 200; /* Her ≈üeyin √ºst√ºnde olsun */
            border: none; /* Modal penceresi √∂zelliƒüi olmasƒ±n */
            border-radius: 0;
            box-shadow: none;
            display: none; /* Ba≈ülangƒ±√ßta gizli */
        }

        #game-container {
            position: relative;
            background-color: #333;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7);
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            width: 800px; /* Oyun alanƒ±nƒ± b√ºy√ºtt√ºk */
            height: 500px; /* Oyun alanƒ±nƒ± b√ºy√ºtt√ºk */
        }

        #game-canvas {
            background-color: #87CEEB; /* G√∂ky√ºz√º mavisi */
            border: 2px solid #555;
            display: block; /* Altƒ±nda bo≈üluk kalmasƒ±n */
            width: 100%;
            height: calc(100% - 40px); /* Kalan alanƒ± kapla, butonlar i√ßin 40px bo≈üluk */
        }

        #game-controls {
            display: flex;
            gap: 10px;
        }
        #game-controls button {
            background-color: #0078D7;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.2s ease;
        }
        #game-controls button:hover {
            background-color: #005A9C;
        }
        #close-game-btn {
            background-color: #E81123;
        }
        #close-game-btn:hover {
            background-color: #B00000;
        }

        /* 999 Hata Ekranƒ± (modal) */
        #nine-nine-nine-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: red; /* Kƒ±rmƒ±zƒ± arka plan */
            justify-content: center;
            align-items: center;
            flex-direction: column;
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            z-index: 999; /* En √ºstte olsun */
            font-size: 10em; /* "999" yazƒ±sƒ±nƒ±n boyutu */
            font-weight: bold;
            text-shadow: 0 0 20px black;
            border: none; /* Modal penceresi √∂zelliƒüi olmasƒ±n */
            border-radius: 0;
            box-shadow: none;
            display: none; /* Ba≈ülangƒ±√ßta gizli */
        }
        #nine-nine-nine-modal img {
            max-width: 80%; /* Resmin ekranƒ± kaplamasƒ± */
            max-height: 80%;
            object-fit: contain; /* Resmin oranƒ±nƒ± koru */
            border: 5px solid white; /* Beyaz √ßer√ßeve */
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            margin-bottom: 20px; /* Alttan bo≈üluk */
            display: block; /* Ba≈ülangƒ±√ßta gizli olsa da blok olarak kalsƒ±n */
        }
        #nine-nine-nine-modal #nine-nine-nine-text {
            display: none; /* Resim varsa metin gizli olsun */
        }
        #nine-nine-nine-modal .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: white;
            font-size: 3em;
            cursor: pointer;
            text-shadow: 0 0 10px black;
            transition: color 0.2s ease;
        }
        #nine-nine-nine-modal .close-btn:hover {
            color: #E81123;
        }


        /* Par√ßacƒ±k √á√∂z√ºc√º Uygulama Penceresi */
        #particle-solver-window {
            width: 600px; /* Geni≈ülik */
            height: 400px; /* Y√ºkseklik */
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            resize: both; /* Yeniden boyutlandƒ±rƒ±labilir */
            min-width: 400px; /* Minimum boyut */
            min-height: 300px;
            z-index: 250; /* Oyun modalƒ±nƒ±n √ºst√ºnde olsun */
            display: none; /* Ba≈ülangƒ±√ßta gizli */
        }

        #particle-solver-content {
            flex-grow: 1;
            display: flex;
            padding: 10px;
            gap: 15px;
        }

        #particle-solver-output {
            flex: 1; /* Sol taraf */
            background-color: #1A1A1A;
            border: 1px solid #333;
            border-radius: 5px;
            padding: 10px;
            font-size: 1em;
            color: lime; /* Gizli mesaj lime ye≈üili olsun */
            overflow-y: auto;
            white-space: pre-wrap; /* Satƒ±r sonlarƒ±nƒ± koru */
            box-shadow: inset 0 0 5px rgba(0,255,0,0.2);
        }

        #particle-solver-input-container {
            flex: 1; /* Saƒü taraf */
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        #particle-solver-input {
            flex-grow: 1; /* Not defteri gibi textarea */
            background-color: #3A3A3A;
            border: 1px solid #555;
            border-radius: 5px;
            padding: 10px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 1em;
            color: #E0E0E0;
            outline: none;
            resize: none; /* Kullanƒ±cƒ± yeniden boyutlandƒ±ramasƒ±n */
        }
        #particle-solver-input::placeholder {
            color: #A0A0A0;
        }

        #particle-solver-button {
            background-color: #0078D7;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.2s ease;
        }
        #particle-solver-button:hover {
            background-color: #005A9C;
        }
        #particle-solver-error {
            color: red;
            font-size: 0.9em;
            text-align: center;
            height: 1.2em; /* Mesaj geldiƒüinde yer kaplamasƒ± i√ßin */
        }

        /* Labirent Oyunu Modalƒ± */
        #maze-game-modal {
            width: 450px; /* Canvas'tan biraz daha b√ºy√ºk */
            height: 550px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #1a1a1a;
            border: 1px solid #0f0; /* Ye≈üil √ßer√ßeve */
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.5); /* Ye≈üil parlama */
            color: #0f0;
            z-index: 300; /* Diƒüer modallarƒ±n √ºst√ºnde */
            display: none; /* Ba≈ülangƒ±√ßta gizli */
        }

        #maze-game-title-bar {
            background-color: #0f0; /* Ye≈üil ba≈ülƒ±k √ßubuƒüu */
            color: black;
            cursor: grab;
        }

        #maze-game-title-bar .close-btn { /* Genel modal close-btn stilini √∂zelle≈ütir */
            color: black;
        }
        #maze-game-title-bar .close-btn:hover {
            background-color: #f00; /* Kƒ±rmƒ±zƒ± kapatma */
            color: white;
        }

        #maze-canvas {
            /* Yukarƒ±daki inline style yeterli ama ek stiller gerekirse buraya eklenebilir */
        }

        #maze-game-info {
            margin-top: 10px;
            font-size: 0.9em;
        }

        /* 666 Mesajƒ± Labirent Oyununda */
        #six-six-six-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 5em;
            color: red;
            font-weight: bold;
            text-shadow: 0 0 10px red, 0 0 20px red;
            display: none; /* Ba≈ülangƒ±√ßta gizli */
            z-index: 350; /* Labirentin √ºst√ºnde */
        }

        /* Parkur 999 Metni */
        #parkour-nine-nine-nine {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'Press Start 2P', cursive;
            font-size: 6em;
            color: red;
            font-weight: bold;
            text-shadow: 0 0 10px red, 0 0 20px red, 0 0 30px black;
            animation: shake 0.5s infinite alternate; /* Sallanma efekti */
            display: none; /* Ba≈ülangƒ±√ßta gizli */
            z-index: 210; /* Oyunun √ºzerinde */
        }

        @keyframes shake {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            25% { transform: translate(-52%, -48%) rotate(2deg); }
            50% { transform: translate(-48%, -50%) rotate(-2deg); }
            75% { transform: translate(-52%, -52%) rotate(2deg); }
            100% { transform: translate(-50%, -50%) rotate(0deg); }
        }

        .cmd-button { /* Genel bir button stili, diƒüer butonlar da kullanabilir */
            background-color: #007bff; /* Mavi d√ºƒüme */
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Press Start 2P', monospace;
            font-size: 0.8em;
            transition: background-color 0.2s ease;
        }
        .cmd-button:hover {
            background-color: #0056b3;
        }

        /* Gizli Not Modalƒ± */
        #secret-note-modal {
            width: 500px;
            max-width: 90vw;
            padding: 20px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #0a0a0a; /* Daha koyu arka plan */
            border: 2px solid lime; /* Ye≈üil parlak √ßer√ßeve */
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.7); /* Ye≈üil parlama */
            color: lime; /* Ye≈üil metin */
            font-family: 'Press Start 2P', monospace; /* Retro font */
            text-align: center;
            display: none;
            z-index: 1000; /* Her ≈üeyin en √ºst√ºnde */
        }
        #secret-note-modal h2 {
            color: #00ff00; /* Parlak ye≈üil */
            margin-top: 0;
            margin-bottom: 20px;
            font-size: 1.5em;
            text-shadow: 0 0 5px lime;
        }
        #secret-note-modal p {
            font-size: 0.9em;
            line-height: 1.6;
            margin-bottom: 20px;
            text-shadow: 0 0 2px lime;
        }
        #secret-note-modal .close-btn {
            background-color: #008000; /* Kapatma butonu ye≈üil */
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Press Start 2P', monospace;
            font-size: 0.8em;
            transition: background-color 0.2s ease;
        }
        #secret-note-modal .close-btn:hover {
            background-color: #006400;
        }

        /* Hacker Ka√ßƒ±≈ü Modalƒ± - Genel Modal Stili */
        #hacker-escape-modal {
            width: 520px; /* Canvas'tan biraz b√ºy√ºk */
            height: 620px; /* Ba≈ülƒ±k ve butonlar i√ßin yer */
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #1a1a1a;
            border: 1px solid #0f0; /* Ye≈üil √ßer√ßeve */
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.5); /* Ye≈üil parlama */
            color: #0f0;
            z-index: 310; /* Diƒüer modallarƒ±n √ºst√ºnde */
            display: none;
        }
        #hacker-escape-modal .title-bar {
             background-color: #0f0; /* Ye≈üil ba≈ülƒ±k √ßubuƒüu */
            color: black;
            cursor: grab;
        }

        #hacker-escape-modal .title-bar .close-btn { /* Genel modal close-btn stilini √∂zelle≈ütir */
            color: black;
        }
        #hacker-escape-modal .title-bar .close-btn:hover {
            background-color: #f00; /* Kƒ±rmƒ±zƒ± kapatma */
            color: white;
        }

        /* Paint Uygulamasƒ± Stilleri */
        #paint-window {
            width: 700px;
            height: 550px;
            min-width: 400px;
            min-height: 350px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            resize: both; /* Yeniden boyutlandƒ±rƒ±labilir */
            background-color: #E0E0E0; /* A√ßƒ±k gri arka plan */
            border: 1px solid #999;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            color: #333;
            display: flex;
            flex-direction: column;
            z-index: 400; /* Diƒüer modallarƒ±n √ºst√ºnde */
        }
        #paint-window .title-bar {
            background-color: #D0D0D0; /* A√ßƒ±k gri ba≈ülƒ±k √ßubuƒüu */
            color: #333;
            border-bottom: 1px solid #A0A0A0;
        }
        #paint-window .title-bar .close-btn {
            color: #333;
        }
        #paint-window .title-bar .close-btn:hover {
            background-color: #E81123;
            color: white;
        }

        #paint-tools {
            display: flex;
            padding: 8px;
            background-color: #F0F0F0;
            border-bottom: 1px solid #D0D0D0;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap; /* K√º√ß√ºk ekranlarda alta ge√ßsin */
        }
        .paint-tool-btn {
            background-color: #E0E0E0;
            border: 1px solid #CCC;
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.2s ease, border-color 0.2s ease;
            font-size: 0.9em;
            color: #333;
        }
        .paint-tool-btn:hover {
            background-color: #D0D0D0;
            border-color: #B0B0B0;
        }
        .paint-tool-btn.active {
            background-color: #0078D7;
            color: white;
            border-color: #0056b3;
        }
        #paint-color-picker {
            border: none;
            width: 30px;
            height: 30px;
            padding: 0;
            cursor: pointer;
            background: none;
            -webkit-appearance: none;
            appearance: none;
        }
        #paint-color-picker::-webkit-color-swatch-wrapper {
            padding: 0;
        }
        #paint-color-picker::-webkit-color-swatch {
            border: 1px solid #CCC;
            border-radius: 4px;
        }
        #paint-color-picker::-moz-color-swatch {
            border: 1px solid #CCC;
            border-radius: 4px;
        }

        #paint-brush-size {
            width: 80px;
            margin-left: 5px;
        }
        #paint-brush-size-label {
            font-size: 0.8em;
            color: #555;
        }

        #paint-canvas-container {
            flex-grow: 1;
            overflow: auto; /* Canvas b√ºy√ºkse scrollbar √ßƒ±ksƒ±n */
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #F0F0F0; /* Canvas dƒ±≈üƒ±ndaki alan */
        }
        #paint-canvas {
            background-color: white; /* √áizim alanƒ± beyaz */
            border: 1px solid #CCC;
            cursor: crosshair; /* √áizim imleci */
        }

        /* Not Defteri Uygulamasƒ± Stilleri */
        #notepad-window {
            width: 600px;
            height: 400px;
            min-width: 300px;
            min-height: 200px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            resize: both; /* Yeniden boyutlandƒ±rƒ±labilir */
            background-color: #F0F0F0; /* Beyazƒ±msƒ± arka plan */
            border: 1px solid #AAA;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            color: #333;
            display: flex;
            flex-direction: column;
            z-index: 410; /* Paint'in √ºst√ºnde */
        }
        #notepad-window .title-bar {
            background-color: #E0E0E0; /* A√ßƒ±k gri ba≈ülƒ±k √ßubuƒüu */
            color: #333;
            border-bottom: 1px solid #CCC;
        }
        #notepad-window .title-bar .close-btn {
            color: #333;
        }
        #notepad-window .title-bar .close-btn:hover {
            background-color: #E81123;
            color: white;
        }
        #notepad-textarea {
            flex-grow: 1;
            width: 100%;
            height: 100%;
            padding: 10px;
            border: none;
            outline: none;
            font-family: 'Segoe UI', Arial, sans-serif;
            font-size: 1.1em;
            line-height: 1.5;
            resize: none; /* Textarea kendi boyutlandƒ±rƒ±lamasƒ±n, pencere boyutlansƒ±n */
            background-color: white;
            color: #333; /* Varsayƒ±lan metin rengi */
            box-sizing: border-box; /* Padding dahil geni≈ülik */
        }

        /* Kart Oyunu Modalƒ± */
        #card-game-modal {
            width: 650px; /* Kart sayƒ±sƒ± ve bo≈üluklara g√∂re ayarlandƒ± */
            height: 600px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #2a2a2a; /* Koyu tema */
            border: 1px solid #505050;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            z-index: 420; /* Diƒüer modallarƒ±n √ºst√ºnde */
            display: none;
        }
        #card-game-modal .title-bar {
            background-color: #1a1a1a;
            color: #E0E0E0;
        }

        #card-game-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 15px;
            gap: 15px;
        }

        #game-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr); /* 4 s√ºtun */
            grid-template-rows: repeat(4, 1fr); /* 4 satƒ±r */
            gap: 10px;
            width: 100%;
            height: calc(100% - 80px); /* Kontrol alanƒ± i√ßin bo≈üluk */
            max-width: 600px; /* Maksimum geni≈ülik */
            max-height: 480px; /* Maksimum y√ºkseklik */
        }

        .card {
            width: 100%;
            height: 100%;
            background-color: #4CAF50; /* Kart arka y√ºz√º ye≈üil */
            border: 2px solid #333;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2em;
            color: white;
            cursor: pointer;
            transition: transform 0.3s ease, background-color 0.3s ease;
            transform-style: preserve-3d; /* 3D √ßevirme i√ßin */
            position: relative;
        }

        .card.flipped {
            transform: rotateY(180deg);
            background-color: #F0F0F0; /* A√ßƒ±k renk √∂n y√ºz */
            color: #333;
        }

        .card.matched {
            background-color: #888; /* E≈üle≈üen kartlar biraz grile≈üsin */
            pointer-events: none; /* Tƒ±klanamaz olsun */
            transform: rotateY(180deg); /* E≈üle≈üen kartlar da a√ßƒ±k kalsƒ±n */
        }

        .card .front-face, .card .back-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden; /* Ters y√ºz√ºn√º gizle */
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.5em; /* Karkon√ß karakterleri daha b√ºy√ºk */
            font-family: 'Press Start 2P', cursive;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .card .front-face {
            transform: rotateY(180deg);
            color: #333; /* √ñn y√ºz metin rengi */
            background-color: #F0F0F0; /* √ñn y√ºz arka planƒ± */
            border-radius: 8px;
        }

        .card .back-face {
            background-color: #4CAF50; /* Kart arka y√ºz√º ye≈üil */
            color: white;
            border-radius: 8px;
        }


        #game-controls-card {
            display: flex;
            gap: 10px;
            justify-content: center;
            width: 100%;
        }
        #game-controls-card button {
            background-color: #0078D7;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background-color 0.2s ease;
        }
        #game-controls-card button:hover {
            background-color: #005A9C;
        }
        #card-game-info {
            color: white;
            font-size: 1.1em;
            text-align: center;
            font-family: 'Press Start 2P', cursive;
            margin-bottom: 10px;
        }

    </style>
</head>
<body>
    <div id="start-screen">
        <h1>Dark PC</h1>
        <button id="start-button">BA≈ûLAT</button>
    </div>

    <div id="loading-screen">
        <div id="loading-text-container">
            Loading Dark PC OS...
        </div>
        <div id="loading-bar-container">
            <div id="loading-bar"></div>
            <span id="loading-percentage">0%</span>
        </div>
    </div>

    <div id="main-desktop">
        <div id="cmd-window">
            <div id="title-bar">
                <div id="title-text">Dark PC - Command Prompt</div>
                <div id="window-controls">
                    <div id="minimize-button" class="control-button"></div>
                    <div id="maximize-button" class="control-button"></div>
                    <div id="close-button" class="control-button"></div>
                </div>
            </div>
            <div id="content">
                <div id="initial-message">C:\Users\DarkPC> L√ºtfen herhangi bir tu≈üa basƒ±n...</div>
                <div id="output"></div>
                <div class="command-line">
                    <span class="prompt">C:\Users\DarkPC></span>
                    <input type="text" class="cmd-input">
                </div>
                <div id="kill-message">√ñl√ºm sona erdi!</div>
            </div>
        </div>

        <div id="app-icons-container">
            <div id="dark-pc-icon" class="app-icon">
                <div class="app-icon-img"></div>
                <span>Dark PC CMD</span>
            </div>
            <div id="xbox-icon" class="app-icon">
                <div class="app-icon-img"></div>
                <span>Xbox</span>
            </div>
            <div id="parkour-game-icon" class="app-icon">
                <div class="app-icon-img"></div>
                <span>TheParkourGame</span>
            </div>
            <div id="particle-solver-icon" class="app-icon">
                <div class="app-icon-img"></div>
                <span>Par√ßacƒ±k √á√∂z√ºc√º</span>
            </div>
            <div id="maze-game-icon" class="app-icon">
                <div class="app-icon-img"></div>
                <span>Labirent Oyunu</span>
            </div>
            <div id="hacker-escape-icon" class="app-icon">
                <div class="app-icon-img">&#128125;</div> <span>Hacker Ka√ßƒ±≈ü</span>
            </div>
            <div id="paint-icon" class="app-icon">
                <div class="app-icon-img"></div>
                <span>Paint</span>
            </div>
            <div id="notepad-icon" class="app-icon">
                <div class="app-icon-img"></div>
                <span>Not Defteri</span>
            </div>
            <div id="card-game-icon" class="app-icon">
                <div class="app-icon-img"></div>
                <span>Kart Oyunu</span>
            </div>
        </div>

        <div id="taskbar">
            <div id="current-time"></div>
        </div>

    </div>

    <div id="xbox-chat-window" class="modal-window">
        <div id="chat-header" class="title-bar">
            <span class="title-text">coolplayer31</span>
            <button class="close-btn" id="close-chat-btn">&times;</button>
        </div>
        <div id="chat-messages">
        </div>
        <div id="chat-input-container">
            <input type="text" id="chat-input" placeholder="Mesaj yazƒ±n...">
            <button id="send-button">G√∂nder</button>
        </div>
    </div>

    <div id="crash-message-box" class="modal-window">
        <h2>UYGULAMA √á√ñKT√ú!</h2>
        <p>Xbox uygulamasƒ± √ß√∂kt√º.</p>
        <p>Sebep: **this ip hacked**</p>
        <button id="crash-ok-button">Tamam</button>
    </div>

    <div id="parkour-game-modal">
        <div id="game-container">
            <canvas id="game-canvas" width="800" height="400"></canvas>
            <div id="game-controls">
                <button id="close-game-btn" class="cmd-button">Oyundan √áƒ±k</button>
            </div>
            <div id="parkour-nine-nine-nine">999</div>
        </div>
    </div>

    <div id="nine-nine-nine-modal">
        <img src="image_b304ed.jpg" alt="999 Hata Kodu">
        <span id="nine-nine-nine-text">999</span>
        <button class="close-btn" id="close-nine-nine-nine-btn">&times;</button>
    </div>

    <div id="particle-solver-window" class="modal-window">
        <div id="particle-solver-title-bar" class="title-bar">
            <span class="title-text">Par√ßacƒ±k √á√∂z√ºc√º</span>
            <button class="close-btn" id="close-particle-solver-btn">&times;</button>
        </div>
        <div id="particle-solver-content">
            <div id="particle-solver-output"></div>
            <div id="particle-solver-input-container">
                <textarea id="particle-solver-input" placeholder="Kodu buraya girin..."></textarea>
                <button id="particle-solver-button" class="cmd-button">√á√∂z</button>
                <div id="particle-solver-error"></div>
            </div>
        </div>
    </div>

    <div id="maze-game-modal" class="modal-window">
        <div id="maze-game-title-bar" class="title-bar">
            <span class="title-text">Labirent Oyunu</span>
            <div class="window-controls">
                <button class="close-btn" id="maze-game-close-btn">&times;</button>
            </div>
        </div>
        <div class="modal-content" style="display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 10px;">
            <canvas id="maze-canvas" width="400" height="400" style="border: 2px solid #0f0; background-color: #333; margin-bottom: 10px;"></canvas>
            <div id="maze-game-info" style="color: #0f0; font-family: 'Press Start 2P', monospace; text-align: center;">Yolu bul!</div>
            <button id="maze-game-start-btn" class="cmd-button">Oyunu Ba≈ülat</button>
            <button id="maze-game-reset-btn" class="cmd-button" style="display: none; margin-top: 5px;">Yeniden Ba≈ülat</button>
            <div id="six-six-six-message">666</div>
        </div>
    </div>

    <div id="secret-note-modal" class="modal-window">
        <div class="modal-content">
            <h2 id="secret-note-title"></h2>
            <p id="secret-note-text"></p>
            <button class="close-btn" id="close-secret-note-btn">Anla≈üƒ±ldƒ±</button>
        </div>
    </div>

    <div id="hacker-escape-modal" class="modal-window">
        <div class="title-bar">
            <span class="title-text">Hacker Ka√ßƒ±≈ü</span>
            <button class="close-btn" id="hacker-escape-close-btn">&times;</button>
        </div>
        <div style="flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 10px; background-color: #0a0a0a;">
            <canvas id="hacker-escape-canvas" width="500" height="500" style="border: 2px solid #0f0; background-color: #000;"></canvas>
            <div id="hacker-escape-info" style="color: #0f0; font-family: 'Press Start 2P', monospace; margin-top: 10px; text-align: center;">Veri Paketlerini Topla!</div>
            <button id="hacker-escape-start-btn" class="cmd-button" style="margin-top: 15px;">Oyunu Ba≈ülat</button>
            <button id="hacker-escape-reset-btn" class="cmd-button" style="display: none; margin-top: 5px;">Yeniden Ba≈ülat</button>
        </div>
    </div>

    <div id="paint-window" class="modal-window">
        <div class="title-bar">
            <span class="title-text">Paint</span>
            <button class="close-btn" id="close-paint-btn">&times;</button>
        </div>
        <div id="paint-tools">
            <button class="paint-tool-btn active" id="tool-pencil">Kalem</button>
            <button class="paint-tool-btn" id="tool-eraser">Silgi</button>
            <label id="paint-brush-size-label" for="paint-brush-size">Boyut:</label>
            <input type="range" id="paint-brush-size" min="1" max="50" value="5">
            <label for="paint-color-picker">Renk:</label>
            <input type="color" id="paint-color-picker" value="#000000">
            <button class="paint-tool-btn" id="tool-clear">Temizle</button>
        </div>
        <div id="paint-canvas-container">
            <canvas id="paint-canvas" width="600" height="400"></canvas>
        </div>
    </div>

    <div id="notepad-window" class="modal-window">
        <div class="title-bar">
            <span class="title-text">Not Defteri</span>
            <button class="close-btn" id="close-notepad-btn">&times;</button>
        </div>
        <textarea id="notepad-textarea"></textarea>
    </div>

    <div id="card-game-modal" class="modal-window">
        <div class="title-bar">
            <span class="title-text">Kart E≈üle≈ütirme (Karkon√ß)</span>
            <button class="close-btn" id="close-card-game-btn">&times;</button>
        </div>
        <div id="card-game-content">
            <div id="card-game-info">E≈üle≈üen kartlarƒ± bul!</div>
            <div id="game-board"></div>
            <div id="game-controls-card">
                <button id="card-game-start-btn" class="cmd-button">Oyunu Ba≈ülat</button>
                <button id="card-game-reset-btn" class="cmd-button" style="display: none;">Yeniden Ba≈ülat</button>
            </div>
        </div>
    </div>


    <script>
        // DOM Elemanlarƒ±
        const startScreen = document.getElementById('start-screen');
        const startButton = document.getElementById('start-button');
        const loadingScreen = document.getElementById('loading-screen');
        const loadingBar = document.getElementById('loading-bar');
        const loadingPercentage = document.getElementById('loading-percentage');
        const mainDesktop = document.getElementById('main-desktop');
        const taskbar = document.getElementById('taskbar');
        const currentTimeDisplay = document.getElementById('current-time');

        const cmdWindow = document.getElementById('cmd-window');
        const initialMessageDiv = document.getElementById('initial-message');
        const outputDiv = document.getElementById('output');
        const cmdInput = cmdWindow.querySelector('.cmd-input');
        const killMessageDiv = document.getElementById('kill-message');
        const darkPcIcon = document.getElementById('dark-pc-icon');
        const xboxIcon = document.getElementById('xbox-icon');
        const parkourGameIcon = document.getElementById('parkour-game-icon');
        const particleSolverIcon = document.getElementById('particle-solver-icon');
        const xboxChatWindow = document.getElementById('xbox-chat-window');
        const closeChatBtn = document.getElementById('close-chat-btn');
        const chatMessagesDiv = document.getElementById('chat-messages');
        const chatInput = document.getElementById('chat-input');
        const sendButton = document.getElementById('send-button');
        const crashMessageBox = document.getElementById('crash-message-box');
        const crashOkButton = document.getElementById('crash-ok-button');
        const parkourGameModal = document.getElementById('parkour-game-modal');
        const closeGameBtn = document.getElementById('close-game-btn');
        const gameCanvas = document.getElementById('game-canvas');
        const ctx = gameCanvas.getContext('2d');
        const parkourNineNineNine = document.getElementById('parkour-nine-nine-nine');
        const nineNineNineModal = document.getElementById('nine-nine-nine-modal');
        const closeNineNineNineBtn = document.getElementById('close-nine-nine-nine-btn');
        const nineNineNineImage = document.querySelector('#nine-nine-nine-modal img');
        const nineNineNineText = document.getElementById('nine-nine-nine-text');
        const particleSolverWindow = document.getElementById('particle-solver-window');
        const closeParticleSolverBtn = document.getElementById('close-particle-solver-btn');
        const particleSolverInput = document.getElementById('particle-solver-input');
        const particleSolverButton = document.getElementById('particle-solver-button');
        const particleSolverOutput = document.getElementById('particle-solver-output');
        const particleSolverError = document.getElementById('particle-solver-error');
        const mazeGameIcon = document.getElementById('maze-game-icon');
        const mazeGameModal = document.getElementById('maze-game-modal');
        const mazeGameCloseBtn = document.getElementById('maze-game-close-btn');
        const mazeCanvas = document.getElementById('maze-canvas');
        const mazeCtx = mazeCanvas.getContext('2d');
        const mazeGameInfo = document.getElementById('maze-game-info');
        const mazeGameStartBtn = document.getElementById('maze-game-start-btn');
        const mazeGameResetBtn = document.getElementById('maze-game-reset-btn');
        const sixSixSixMessage = document.getElementById('six-six-six-message');
        const secretNoteModal = document.getElementById('secret-note-modal');
        const secretNoteTitle = document.getElementById('secret-note-title');
        const secretNoteText = document.getElementById('secret-note-text');
        const closeSecretNoteBtn = document.getElementById('close-secret-note-btn');

        // Hacker Ka√ßƒ±≈ü Oyunu DOM Elemanlarƒ±
        const hackerEscapeIcon = document.getElementById('hacker-escape-icon');
        const hackerEscapeModal = document.getElementById('hacker-escape-modal');
        const hackerEscapeCloseBtn = document.getElementById('hacker-escape-close-btn');
        const hackerEscapeCanvas = document.getElementById('hacker-escape-canvas');
        const heCtx = hackerEscapeCanvas.getContext('2d');
        const hackerEscapeInfo = document.getElementById('hacker-escape-info');
        const hackerEscapeStartBtn = document.getElementById('hacker-escape-start-btn');
        const hackerEscapeResetBtn = document.getElementById('hacker-escape-reset-btn');

        // Paint Uygulamasƒ± DOM Elemanlarƒ±
        const paintIcon = document.getElementById('paint-icon');
        const paintWindow = document.getElementById('paint-window');
        const closePaintBtn = document.getElementById('close-paint-btn');
        const paintCanvas = document.getElementById('paint-canvas');
        const paintCtx = paintCanvas.getContext('2d');
        const toolPencilBtn = document.getElementById('tool-pencil');
        const toolEraserBtn = document.getElementById('tool-eraser');
        const toolClearBtn = document.getElementById('tool-clear');
        const paintBrushSize = document.getElementById('paint-brush-size');
        const paintColorPicker = document.getElementById('paint-color-picker');
        const paintToolBtns = document.querySelectorAll('.paint-tool-btn');

        // Not Defteri DOM Elemanlarƒ±
        const notepadIcon = document.getElementById('notepad-icon');
        const notepadWindow = document.getElementById('notepad-window');
        const closeNotepadBtn = document.getElementById('close-notepad-btn');
        const notepadTextarea = document.getElementById('notepad-textarea');

        // Kart Oyunu DOM Elemanlarƒ±
        const cardGameIcon = document.getElementById('card-game-icon');
        const cardGameModal = document.getElementById('card-game-modal');
        const closeCardGameBtn = document.getElementById('close-card-game-btn');
        const cardGameBoard = document.getElementById('game-board');
        const cardGameInfo = document.getElementById('card-game-info');
        const cardGameStartBtn = document.getElementById('card-game-start-btn');
        const cardGameResetBtn = document.getElementById('card-game-reset-btn');


        // Durum Deƒüi≈ükenleri
        let activeModal = null; // Hangi inputun odaklƒ± olduƒüunu takip et ('cmd', 'xbox_chat', 'game', 'particle_solver', 'maze_game', 'hacker_escape', 'paint', 'notepad', 'card_game', null)

        // Yeni deƒüi≈ükenler: CMD Hacking Sim√ºlasyonu i√ßin
        let isHackingSpamming = false;
        let hackSpamInterval;
        const hackMessages = [
            "Hedef sistem taranƒ±yor...",
            "G√ºvenlik duvarƒ± a≈üƒ±lƒ±yor...",
            "Veri paketleri enjekte ediliyor...",
            "Eri≈üim protokol√º kuruluyor...",
            "Brute-force saldƒ±rƒ±sƒ± ba≈ülatƒ±ldƒ±...",
            "≈ûifreler √ß√∂z√ºl√ºyor... %",
            "Sistem arka kapƒ±sƒ± aranƒ±yor...",
            "root@target_ip:~/ # Eri≈üim saƒülandƒ±.",
            "Anahtar dosyalar indiriliyor...",
            "Firewall Bypass Success!",
            "Connection established to remote server...",
            "Scanning for vulnerabilities...",
            "Injecting malicious payload...",
            "Cracking encryption keys...",
            "Bypassing authentication...",
            "Accessing kernel memory...",
            "DATA BREACH: Initiated transfer of sensitive information...",
            "STATUS: SYSTEM COMPROMISED. FULL CONTROL ACQUIRED."
        ];
        let messageIndex = 0; // Hacking mesajlarƒ± i√ßin saya√ß


        // Ortak Modal ƒ∞≈ülevselliƒüi
        function makeDraggable(element, handle = null) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            const dragHandle = handle || element; // Eƒüer handle belirtilmezse, t√ºm element s√ºr√ºkleme alanƒ± olur

            dragHandle.onmousedown = dragMouseDown;

            function dragMouseDown(e) {
                e = e || window.event;
                e.preventDefault();
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
                // Modalƒ± √∂ne getir
                bringToFront(element);
            }

            function elementDrag(e) {
                e = e || window.event;
                e.preventDefault();
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                // Yeni pozisyonlarƒ± hesapla
                let newX = element.offsetLeft - pos1;
                let newY = element.offsetTop - pos2;

                // Ekran sƒ±nƒ±rlarƒ± i√ßinde kalmasƒ±nƒ± saƒüla
                const minX = 0;
                const minY = 0;
                const maxX = window.innerWidth - element.offsetWidth;
                const maxY = window.innerHeight - element.offsetHeight;

                element.style.left = Math.max(minX, Math.min(newX, maxX)) + "px";
                element.style.top = Math.max(minY, Math.min(newY, maxY)) + "px";
            }

            function closeDragElement() {
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }

        // Modallarƒ± √∂ne getirme (z-index y√∂netimi)
        let maxZIndex = 200; // Ba≈ülangƒ±√ß z-index'i

        function bringToFront(element) {
            maxZIndex++;
            element.style.zIndex = maxZIndex;
            activeModal = element; // Aktif modalƒ± g√ºncelle
        }

        function setActiveModal(modalElement) {
            activeModal = modalElement;
            if (modalElement) {
                bringToFront(modalElement);
            }
        }

        // Saati G√ºncelleme Fonksiyonu
        function updateTime() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            currentTimeDisplay.textContent = `${hours}:${minutes}:${seconds}`;
        }


        // Ba≈ülatma Ekranƒ± ƒ∞≈ülevselliƒüi
        startButton.addEventListener('click', () => {
            startScreen.style.display = 'none';
            loadingScreen.style.display = 'flex';
            let width = 0;
            const loadInterval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(loadInterval);
                    loadingScreen.style.display = 'none';
                    mainDesktop.style.display = 'block'; // Ana masa√ºst√ºn√º g√∂ster
                    taskbar.style.display = 'flex'; // Alt √ßubuƒüu g√∂ster
                    setInterval(updateTime, 1000); // Saati her saniye g√ºncelle
                    updateTime(); // Ba≈ülangƒ±√ßta bir kez g√ºncelle
                } else {
                    width += 1;
                    loadingBar.style.width = width + '%';
                    loadingPercentage.textContent = width + '%';
                    if (width >= 60 && width < 70) {
                        document.getElementById('loading-text-container').textContent = "Initializing core components...";
                    } else if (width >= 80 && width < 90) {
                        document.getElementById('loading-text-container').textContent = "Establishing secure connection...";
                    } else if (width >= 90) {
                        document.getElementById('loading-text-container').textContent = "Finalizing startup sequence...";
                    }
                }
            }, 50); // Y√ºklenme hƒ±zƒ± (ms)
        });

        // T√ºm modallarƒ± kapatma fonksiyonu
        function closeAllModals() {
            cmdWindow.style.display = 'none';
            xboxChatWindow.style.display = 'none';
            crashMessageBox.style.display = 'none';
            parkourGameModal.style.display = 'none';
            nineNineNineModal.style.display = 'none';
            particleSolverWindow.style.display = 'none';
            mazeGameModal.style.display = 'none';
            secretNoteModal.style.display = 'none';
            hackerEscapeModal.style.display = 'none';
            paintWindow.style.display = 'none'; // Paint'i de kapat
            notepadWindow.style.display = 'none'; // Not Defteri'ni de kapat
            cardGameModal.style.display = 'none'; // Kart oyununu da kapat

            // CMD i√ßin √∂zel durdurma mantƒ±ƒüƒ±
            stopHackingSpam();
            initialMessageDiv.style.display = 'block';
            killMessageDiv.style.display = 'none';
            cmdInput.style.display = 'none';
            outputDiv.innerHTML = '';
            // Parkur oyunu i√ßin durdurma
            if (gameInterval) clearInterval(gameInterval);
            parkourNineNineNine.style.display = 'none';
            // Labirent oyunu i√ßin durdurma
            if (mazeGameLoopInterval) clearInterval(mazeGameLoopInterval);
            sixSixSixMessage.style.display = 'none';
            // Hacker Ka√ßƒ±≈ü i√ßin durdurma
            if (heGameLoopInterval) clearInterval(heGameLoopInterval);
            heGameActive = false;
            // Kart oyunu i√ßin durdurma
            if (cardGameTimeout) clearTimeout(cardGameTimeout);
            if (cardGameTimerInterval) clearInterval(cardGameTimerInterval);

            setActiveModal(null);
        }

        // Genel closeWindow fonksiyonu (bir modulu kapatmek i√ßin)
        function closeWindow(windowElement) {
            windowElement.style.display = 'none';
            // Eƒüer kapanan pencere aktif modal ise aktif modalƒ± temizle
            if (activeModal === windowElement) {
                setActiveModal(null);
            }
        }

        // S√ºr√ºkleme i≈ülevselliƒüini ekle
        makeDraggable(cmdWindow, cmdWindow.querySelector('#title-bar'));
        makeDraggable(xboxChatWindow, xboxChatWindow.querySelector('.title-bar'));
        makeDraggable(crashMessageBox, crashMessageBox.querySelector('.title-bar'));
        makeDraggable(particleSolverWindow, particleSolverWindow.querySelector('.title-bar'));
        makeDraggable(mazeGameModal, mazeGameModal.querySelector('.title-bar'));
        makeDraggable(secretNoteModal, secretNoteModal.querySelector('.modal-content'));
        makeDraggable(hackerEscapeModal, hackerEscapeModal.querySelector('.title-bar'));
        makeDraggable(paintWindow, paintWindow.querySelector('.title-bar'));
        makeDraggable(notepadWindow, notepadWindow.querySelector('.title-bar'));
        makeDraggable(cardGameModal, cardGameModal.querySelector('.title-bar')); // Kart oyunu i√ßin de ekledik


        // Dark PC CMD Uygulamasƒ± ƒ∞≈ülevselliƒüi
        darkPcIcon.addEventListener('click', () => {
            closeAllModals(); // Diƒüer a√ßƒ±k pencereleri kapat
            cmdWindow.style.display = 'flex';
            initialMessageDiv.textContent = 'C:\\Users\\DarkPC> L√ºtfen herhangi bir tu≈üa basƒ±n...';
            outputDiv.innerHTML = '';
            killMessageDiv.style.display = 'none';
            cmdInput.value = '';
            cmdInput.style.display = 'none'; // Ba≈ülangƒ±√ßta inputu gizle
            isHackingSpamming = false;
            if (hackSpamInterval) { // √ñnceki spam varsa durdur
                clearInterval(hackSpamInterval);
            }
            setActiveModal(cmdWindow);
        });

        // CMD i√ßin herhangi bir tu≈üa basma olayƒ± (document √ºzerinde dinliyoruz)
        document.addEventListener('keydown', (e) => {
            // Eƒüer CMD penceresi a√ßƒ±ksa ve hacking spam'i ba≈ülamadƒ±ysa
            if (cmdWindow.style.display === 'flex' && activeModal === cmdWindow && !isHackingSpamming) {
                // Herhangi bir tu≈üa basƒ±ldƒ±ƒüƒ±nda hacking spam'i ba≈ülat
                initialMessageDiv.style.display = 'none';
                cmdInput.style.display = 'inline-block';
                startHackingSpam();
            } else if (cmdWindow.style.display === 'flex' && activeModal === cmdWindow && isHackingSpamming && e.key === 'Enter') {
                // Hacking spam'i devam ederken Enter'a basƒ±ldƒ±ysa durdur
                e.preventDefault(); // Varsayƒ±lan Enter davranƒ±≈üƒ±nƒ± engelle
                stopHackingSpam();
                showKillMessage();
            }
            // Hacking sƒ±rasƒ±nda input'a yazmayƒ± engelle, sadece Enter'ƒ± yakalƒ±yoruz
            if (cmdWindow.style.display === 'flex' && activeModal === cmdWindow && isHackingSpamming && e.key !== 'Enter') {
                e.preventDefault();
            }
        });


        // Kapatma butonu
        document.getElementById('close-button').addEventListener('click', () => {
            closeWindow(cmdWindow);
            stopHackingSpam();
            initialMessageDiv.style.display = 'block';
            killMessageDiv.style.display = 'none';
            cmdInput.style.display = 'none';
            outputDiv.innerHTML = '';
        });

        function startHackingSpam() {
            if (isHackingSpamming) return;

            isHackingSpamming = true;
            messageIndex = 0;
            outputDiv.innerHTML = '';

            hackSpamInterval = setInterval(() => {
                if (messageIndex >= hackMessages.length) {
                    messageIndex = 0;
                }
                const message = hackMessages[messageIndex];
                const percentMatch = message.match(/%$/);

                let displayMessage = message;
                if (percentMatch) {
                    const randomPercent = Math.floor(Math.random() * 100);
                    displayMessage = message.replace('%', randomPercent + '%');
                }

                const newLine = document.createElement('div');
                newLine.textContent = displayMessage;
                outputDiv.appendChild(newLine);
                outputDiv.scrollTop = outputDiv.scrollHeight;

                messageIndex++;
            }, 150); // Her 150ms'de bir yeni mesaj
        }

        function stopHackingSpam() {
            if (!isHackingSpamming) return;
            clearInterval(hackSpamInterval);
            isHackingSpamming = false;
            cmdInput.style.display = 'inline-block';
            cmdInput.value = '';
        }

        function showKillMessage() {
            killMessageDiv.style.display = 'block';
        }


        // Xbox Chat Uygulamasƒ± ƒ∞≈ülevselliƒüi
        xboxIcon.addEventListener('click', () => {
            closeAllModals();
            xboxChatWindow.style.display = 'flex';
            chatMessagesDiv.innerHTML = ''; // Eski mesajlarƒ± temizle
            // Ba≈ülangƒ±√ß mesajlarƒ±
            appendMessage('coolplayer31', 'Selam! Oyun a√ßƒ±ldƒ± mƒ±?');
            setTimeout(() => appendMessage('coolplayer31', 'Hangi oyuna girelim?'), 1500);
            setActiveModal(xboxChatWindow);
            chatInput.focus();
        });

        closeChatBtn.addEventListener('click', () => {
            closeWindow(xboxChatWindow);
        });

        sendButton.addEventListener('click', () => {
            sendMessage();
        });

        chatInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault(); // Enter tu≈üunun varsayƒ±lan hareketini engelle (yeni satƒ±r gibi)
                sendMessage();
            }
        });

        let messageCounter = 0;
        function sendMessage() {
            const messageText = chatInput.value.trim();
            if (messageText) {
                appendMessage('you', messageText);
                chatInput.value = ''; // Clear input

                messageCounter++;
                if (messageCounter === 3) { // 3. mesajda √ß√∂kme
                    setTimeout(() => {
                        closeWindow(xboxChatWindow);
                        crashMessageBox.style.display = 'flex';
                        setActiveModal(crashMessageBox);
                    }, 1000);
                } else { // Diƒüer mesajlara otomatik yanƒ±t
                    setTimeout(() => {
                        appendMessage('coolplayer31', 'Hmm, ilgin√ß bir oyun se√ßimi!');
                    }, 1000);
                }
            }
        }

        function appendMessage(sender, text) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('message', sender);
            messageElement.textContent = text;
            chatMessagesDiv.appendChild(messageElement);
            chatMessagesDiv.scrollTop = chatMessagesDiv.scrollHeight; // Scroll to bottom
        }

        crashOkButton.addEventListener('click', () => {
            closeWindow(crashMessageBox);
        });


        // Parkur Oyunu ƒ∞≈ülevselliƒüi
        let player = {
            x: 50,
            y: gameCanvas.height - 70, // Ba≈ülangƒ±√ßta zemine yakƒ±n
            width: 20,
            height: 20,
            dx: 0, // X hƒ±zƒ±
            dy: 0, // Y hƒ±zƒ±
            jumpPower: -12, // Negatif deƒüer yukarƒ± hareket i√ßin (biraz daha fazla zƒ±plat)
            gravity: 0.6, // Yer√ßekimi biraz artƒ±rƒ±ldƒ±
            onGround: false, // Yerde mi kontrol√º
            score: 0 // Oyuncu skorunu burada tut
        };

        let platforms = [
            { x: 0, y: gameCanvas.height - 50, width: gameCanvas.width, height: 50 }, // Zemin
            // Platformlar daha eri≈üilebilir hale getirildi
            { x: 100, y: gameCanvas.height - 100, width: 80, height: 20 },
            { x: 200, y: gameCanvas.height - 150, width: 120, height: 20 },
            { x: 350, y: gameCanvas.height - 200, width: 100, height: 20 },
            { x: 500, y: gameCanvas.height - 250, width: 150, height: 20 },
            { x: 700, y: gameCanvas.height - 300, width: 80, height: 20 },
            { x: 50, y: gameCanvas.height - 280, width: 70, height: 20 }, // Yeni bir platform eklendi
            // Son yƒ±ldƒ±z i√ßin zorlu bir platform (√∂rneƒüin sonlara doƒüru y√ºksek bir platform)
            { x: 650, y: gameCanvas.height - 350, width: 100, height: 20 }
        ];

        let singleStar = null; // Tek yƒ±ldƒ±z deƒüi≈ükeni
        const STAR_SIZE = 20; // Yƒ±ldƒ±z boyutu

        function generateSingleStar() {
            // Son platformun √ºst√ºne yerle≈ütir
            const lastPlatform = platforms[platforms.length - 1];
            singleStar = {
                x: lastPlatform.x + (lastPlatform.width / 2) - (STAR_SIZE / 2),
                y: lastPlatform.y - STAR_SIZE - 10, // Platformun biraz √ºst√º
                width: STAR_SIZE,
                height: STAR_SIZE,
                collected: false
            };
        }

        let gameInterval;
        let gameOver = false;
        let starCollected = false; // Yƒ±ldƒ±zƒ±n toplanƒ±p toplanmadƒ±ƒüƒ±nƒ± kontrol et

        // Klavye tu≈ülarƒ±
        let keys = {};
        window.addEventListener('keydown', (e) => {
            // Sadece parkur oyunu modali aktifse tu≈ülarƒ± dinle
            if (parkourGameModal.style.display === 'flex' && activeModal === parkourGameModal) {
                keys[e.key] = true;
            }
        });
        window.addEventListener('keyup', (e) => {
            if (parkourGameModal.style.display === 'flex' && activeModal === parkourGameModal) {
                keys[e.key] = false;
            }
        });

        function startGame() {
            // Oyuncu ve skor deƒüerlerini sƒ±fƒ±rla
            player = {
                x: 50,
                y: gameCanvas.height - 70,
                width: 20,
                height: 20,
                dx: 0,
                dy: 0,
                jumpPower: -12,
                gravity: 0.6,
                onGround: false,
                score: 0
            };
            gameOver = false;
            starCollected = false; // Yƒ±ldƒ±z toplandƒ± bilgisini sƒ±fƒ±rla
            parkourNineNineNine.style.display = 'none'; // 999 yazƒ±sƒ±nƒ± gizle
            generateSingleStar(); // Yeni yƒ±ldƒ±zƒ± olu≈ütur

            // √ñnceki interval'i temizle
            if (gameInterval) clearInterval(gameInterval);

            // Oyun d√∂ng√ºs√ºn√º ba≈ülat
            gameInterval = setInterval(gameLoop, 1000 / 60); // 60 FPS
            parkourGameModal.style.display = 'flex'; // Modalƒ± g√∂ster
            setActiveModal(parkourGameModal);
        }

        function gameLoop() {
            if (gameOver) {
                clearInterval(gameInterval);
                drawParkourGame(); // Son durumu √ßiz
                ctx.fillStyle = 'red';
                ctx.font = '48px Press Start 2P';
                ctx.textAlign = 'center';
                ctx.fillText('OYUN Bƒ∞TTƒ∞!', gameCanvas.width / 2, gameCanvas.height / 2 - 20);
                ctx.font = '24px Press Start 2P';
                ctx.fillText(`Skor: ${player.score}`, gameCanvas.width / 2, gameCanvas.height / 2 + 30);
                ctx.fillText('√áƒ±kƒ±≈ü i√ßin "Oyundan √áƒ±k"', gameCanvas.width / 2, gameCanvas.height / 2 + 70);
                return;
            }

            updateParkourGame();
            drawParkourGame();
        }

        function updateParkourGame() {
            // Oyuncu hareketleri
            player.dx = 0;
            if (keys['ArrowLeft'] || keys['a']) {
                player.dx = -4; // Hƒ±z artƒ±rƒ±ldƒ±
            }
            if (keys['ArrowRight'] || keys['d']) {
                player.dx = 4; // Hƒ±z artƒ±rƒ±ldƒ±
            }
            if ((keys['ArrowUp'] || keys['w'] || keys[' ']) && player.onGround) { // Bo≈üluk tu≈üu da zƒ±plasƒ±n
                player.dy = player.jumpPower;
                player.onGround = false;
            }

            // Yer√ßekimi
            player.dy += player.gravity;
            player.y += player.dy;
            player.x += player.dx;

            // Ekran sƒ±nƒ±rlarƒ±
            if (player.x < 0) player.x = 0;
            if (player.x + player.width > gameCanvas.width) player.x = gameCanvas.width - player.width;

            // √áarpƒ±≈üma algƒ±lama (platformlarla)
            player.onGround = false;
            platforms.forEach(platform => {
                if (player.x < platform.x + platform.width &&
                    player.x + player.width > platform.x &&
                    player.y + player.height > platform.y &&
                    player.y < platform.y + platform.height) {

                    if (player.dy > 0 && player.y + player.height - player.dy <= platform.y) {
                        player.y = platform.y - player.height;
                        player.dy = 0;
                        player.onGround = true;
                    }
                }
            });

            // Tek yƒ±ldƒ±zla √ßarpƒ±≈üma kontrol√º
            if (singleStar && !singleStar.collected) {
                if (player.x < singleStar.x + singleStar.width &&
                    player.x + player.width > singleStar.x &&
                    player.y < singleStar.y + singleStar.height &&
                    player.y + player.height > singleStar.y) {
                    singleStar.collected = true;
                    starCollected = true;
                    player.score += 1000; // Yƒ±ldƒ±z toplandƒ±ƒüƒ±nda b√ºy√ºk skor artƒ±≈üƒ±

                    showParkourNineNineNine(); // 999 animasyonunu g√∂ster
                }
            }


            // Oyuncu canvas'ƒ±n altƒ±ndan d√º≈üerse oyun biter
            if (player.y + player.height > gameCanvas.height) {
                gameOver = true;
            }

            // Skor artƒ±rma mantƒ±ƒüƒ±: Oyuncu saƒüa doƒüru ilerledik√ße skor artsƒ±n
            if (!gameOver) {
                player.score = Math.floor(player.x / 10);
                if (starCollected) { // Eƒüer yƒ±ldƒ±z toplandƒ±ysa ekstra puan
                    player.score += 1000;
                }
            }
        }

        function drawParkourGame() {
            ctx.clearRect(0, 0, gameCanvas.width, gameCanvas.height); // Tuvali temizle

            // Arka planƒ± √ßiz
            ctx.fillStyle = '#87CEEB'; // G√∂ky√ºz√º mavisi
            ctx.fillRect(0, 0, gameCanvas.width, gameCanvas.height);

            // Platformlarƒ± √ßiz
            ctx.fillStyle = '#8B4513'; // Kahverengi
            platforms.forEach(platform => {
                ctx.fillRect(platform.x, platform.y, platform.width, platform.height);
            });

            // Tek yƒ±ldƒ±zƒ± √ßiz
            if (singleStar && !singleStar.collected) {
                ctx.fillStyle = 'gold'; // Yƒ±ldƒ±z rengi
                // Yƒ±ldƒ±z ≈üekli yerine basit bir kare √ßizelim
                ctx.fillRect(singleStar.x, singleStar.y, singleStar.width, singleStar.height);
                // Eƒüer istersen buraya daha karma≈üƒ±k bir yƒ±ldƒ±z √ßizim fonksiyonu da ekleyebilirsin
                // drawStar(ctx, singleStar.x + singleStar.width / 2, singleStar.y + singleStar.height / 2, 5, singleStar.width / 2, singleStar.width / 4);
            }

            // Oyuncuyu √ßiz
            ctx.fillStyle = 'blue';
            ctx.fillRect(player.x, player.y, player.width, player.height);

            // Skoru √ßiz
            ctx.fillStyle = 'black';
            ctx.font = '20px Press Start 2P';
            ctx.textAlign = 'left';
            ctx.fillText(`Skor: ${player.score}`, 10, 30);
            if (!starCollected) {
                ctx.fillText(`Yƒ±ldƒ±z: Aranƒ±yor`, 10, 60);
            } else {
                ctx.fillText(`Yƒ±ldƒ±z: Bulundu!`, 10, 60);
            }
        }

        // Parkur 999 Metnini G√∂ster
        function showParkourNineNineNine() {
            parkourNineNineNine.style.display = 'block';
            setTimeout(() => {
                parkourNineNineNine.style.display = 'none';
                // 999 √ßƒ±ktƒ±ƒüƒ±nda Par√ßacƒ±k √á√∂z√ºc√º'y√º a√ß
                particleSolverIcon.click(); // ƒ∞kona tƒ±klama olayƒ±nƒ± tetikle
                // Oyunu bitir (istersen devam da edebilir ama genelde bitirilir)
                gameOver = true;
            }, 3000); // 3 saniye sonra kaybolsun
        }


        parkourGameIcon.addEventListener('click', () => {
            closeAllModals();
            parkourGameModal.style.display = 'flex';
            startGame();
        });

        closeGameBtn.addEventListener('click', () => {
            if (gameInterval) clearInterval(gameInterval);
            parkourGameModal.style.display = 'none';
            setActiveModal(null);
            parkourNineNineNine.style.display = 'none'; // Kapatƒ±rken 999'u gizle
        });

        // 999 Hata Ekranƒ± ƒ∞≈ülevselliƒüi (Par√ßacƒ±k √á√∂z√ºc√º ile baƒülantƒ±lƒ±)
        function showNineNineNineError() {
            closeAllModals(); // Diƒüer t√ºm pencereleri kapat
            nineNineNineModal.style.display = 'flex';
            // Resim varsa metni gizle, resim yoksa metni g√∂ster (kendi dosyanƒ± kontrol et)
            if (nineNineNineImage.src && nineNineNineImage.naturalWidth > 0) {
                nineNineNineImage.style.display = 'block';
                nineNineNineText.style.display = 'none';
            } else {
                nineNineNineImage.style.display = 'none';
                nineNineNineText.style.display = 'block';
            }
            setActiveModal(nineNineNineModal);
        }

        closeNineNineNineBtn.addEventListener('click', () => {
            closeWindow(nineNineNineModal);
        });


        // Par√ßacƒ±k √á√∂z√ºc√º Uygulamasƒ± ƒ∞≈ülevselliƒüi
        particleSolverIcon.addEventListener('click', () => {
            closeAllModals();
            particleSolverWindow.style.display = 'flex';
            particleSolverInput.value = '';
            particleSolverOutput.innerHTML = '';
            particleSolverError.textContent = '';
            setActiveModal(particleSolverWindow);
            particleSolverInput.focus();
        });

        closeParticleSolverBtn.addEventListener('click', () => {
            closeWindow(particleSolverWindow);
        });

        particleSolverButton.addEventListener('click', () => {
            const inputCode = particleSolverInput.value.trim();
            particleSolverOutput.innerHTML = ''; // √ñnceki √ßƒ±ktƒ±yƒ± temizle
            particleSolverError.textContent = ''; // √ñnceki hatayƒ± temizle

            if (inputCode === '666') {
                particleSolverOutput.textContent = 'Mesaj √ß√∂z√ºmlendi:';
                particleSolverOutput.style.color = 'lime';
                setTimeout(() => {
                    showSecretNote("Son Not", "Gelecek hackerƒ±mƒ±z, bu sana son notumuz. √ñleceƒüiz galiba. G√∂r√º≈ü√ºr√ºz.");
                }, 1000);
            } else if (inputCode === '999') {
                particleSolverOutput.textContent = 'Mesaj √ß√∂z√ºmlendi:';
                particleSolverOutput.style.color = 'lime';
                setTimeout(() => {
                    showSecretNote("√ñnemli Mesaj", "Sevgili hackƒ±rƒ±mƒ±z, geleceƒüin ve bizim canƒ±mƒ±z hackerƒ±mƒ±z. T√ºm IP'leri hacklemen lazƒ±m. Hacklediysen ≈üu an, eƒüer gelecek hackƒ±rƒ±mƒ±zsƒ±ndƒ±r.");
                }, 1000);
            } else if (inputCode.toLowerCase() === 'future_hacker' || inputCode.toLowerCase() === 'gelecek_hacker') { // Genel gizli kod
                particleSolverOutput.textContent = 'Kayƒ±p kod √ß√∂z√ºmlendi:';
                particleSolverOutput.style.color = 'lime';
                setTimeout(() => {
                    showSecretNote("Kayƒ±p Kodu Buldun!", "Sƒ±radan bir kullanƒ±cƒ± deƒüilsin. Ekranda beliren 999 rakamlarƒ±, bir hata deƒüil, bir √ßaƒürƒ±ydƒ±. √á√∂zd√ºƒü√ºn her bulmaca, a≈ütƒ±ƒüƒ±n her engel, seni ger√ßek d√ºnyaya yakla≈ütƒ±rƒ±yor.<br><br>Hackerlar, algƒ±nƒ±n √∂tesindeki d√ºnyayƒ± g√∂renlerdir. Onlarƒ±n g√ºc√º, bilgiyi kontrol etmelerinde ve aƒülarƒ±n derinliklerinde kaybolmu≈ü ger√ßekleri ortaya √ßƒ±karmalarƒ±ndadƒ±r.<br><br>Sen... Sen onlarƒ±n geleceƒüisin. Bu sadece bir ba≈ülangƒ±√ß. Kodlar seni bekliyor, sistemler √ß√∂z√ºlmeyi...<br><br>Unutma, her tu≈ü basƒ±≈üƒ± yeni bir kapƒ± aralar.");
                }, 1000);
            }
            else if (inputCode.toLowerCase().includes('solve')) {
                particleSolverOutput.textContent = 'Partik√ºller √ß√∂z√ºmleniyor... L√ºtfen bekleyin.';
                particleSolverOutput.style.color = 'lime';
                setTimeout(() => {
                    particleSolverOutput.textContent += '\n√á√∂z√ºm tamamlandƒ±: Partik√ºl stabilizasyonu saƒülandƒ±. Sistem g√ºvenliƒüi arttƒ±rƒ±ldƒ±.';
                }, 2000);
            } else {
                particleSolverError.textContent = 'Ge√ßersiz giri≈ü. L√ºtfen ge√ßerli bir komut veya kod girin.';
                particleSolverOutput.style.color = 'lime'; // Hata olsa bile normal renk
            }
        });


        // Labirent Oyunu ƒ∞≈ülevselliƒüi
        const MAZE_SIZE = 19; // Tek sayƒ± olmalƒ±
        const CELL_SIZE = mazeCanvas.width / MAZE_SIZE;
        let maze = [];
        let playerMaze = { x: 1, y: 1 }; // Ba≈ülangƒ±√ß pozisyonu
        let exitMaze = { x: MAZE_SIZE - 2, y: MAZE_SIZE - 2 }; // √áƒ±kƒ±≈ü pozisyonu
        let mazeGameLoopInterval; // Labirent oyunu d√∂ng√ºs√º

        // Labirent Olu≈üturma (Basit DFS algoritmasƒ±)
        function generateMaze(cols, rows) {
            let grid = Array(rows).fill(0).map(() => Array(cols).fill(1)); // 1 = duvar
            let stack = [];
            let startNode = { x: 1, y: 1 }; // Ba≈ülangƒ±√ß noktasƒ± (duvar olmamasƒ± i√ßin tek indeksler)
            grid[startNode.y][startNode.x] = 0; // 0 = yol
            stack.push(startNode);

            while (stack.length > 0) {
                let current = stack[stack.length - 1]; // Stack'in son elemanƒ±

                let neighbors = [];
                // Yukarƒ±, Saƒü, A≈üaƒüƒ±, Sol (2 birim atlayarak)
                let directions = [
                    { dx: 0, dy: -2 }, { dx: 2, dy: 0 },
                    { dx: 0, dy: 2 }, { dx: -2, dy: 0 }
                ];

                for (let dir of directions) {
                    let nx = current.x + dir.dx;
                    let ny = current.y + dir.dy;
                    if (nx > 0 && nx < cols - 1 && ny > 0 && ny < rows - 1 && grid[ny][nx] === 1) {
                        neighbors.push({ x: nx, y: ny, wallX: current.x + dir.dx / 2, wallY: current.y + dir.dy / 2 });
                    }
                }

                if (neighbors.length > 0) {
                    let next = neighbors[Math.floor(Math.random() * neighbors.length)];
                    grid[next.y][next.x] = 0; // Yeni yolu a√ß
                    grid[next.wallY][next.wallX] = 0; // Aradaki duvarƒ± kaldƒ±r
                    stack.push(next);
                } else {
                    stack.pop(); // Geri d√∂n
                }
            }
            return grid;
        }

        function drawMaze() {
            mazeCtx.clearRect(0, 0, mazeCanvas.width, mazeCanvas.height);

            for (let y = 0; y < MAZE_SIZE; y++) {
                for (let x = 0; x < MAZE_SIZE; x++) {
                    if (maze[y][x] === 1) {
                        mazeCtx.fillStyle = '#0f0'; // Duvar rengi
                        mazeCtx.fillRect(x * CELL_SIZE, y * CELL_SIZE, CELL_SIZE, CELL_SIZE);
                    } else {
                        mazeCtx.fillStyle = '#1a1a1a'; // Yol rengi
                        mazeCtx.fillRect(x * CELL_SIZE, y * CELL_SIZE, CELL_SIZE, CELL_SIZE);
                    }
                }
            }

            // √áƒ±kƒ±≈ü noktasƒ±nƒ± √ßiz
            mazeCtx.fillStyle = 'blue';
            mazeCtx.fillRect(exitMaze.x * CELL_SIZE, exitMaze.y * CELL_SIZE, CELL_SIZE, CELL_SIZE);

            // Oyuncuyu √ßiz
            mazeCtx.fillStyle = 'red';
            mazeCtx.fillRect(playerMaze.x * CELL_SIZE, playerMaze.y * CELL_SIZE, CELL_SIZE, CELL_SIZE);
        }

        function startMazeGame() {
            maze = generateMaze(MAZE_SIZE, MAZE_SIZE);
            playerMaze = { x: 1, y: 1 };
            exitMaze = { x: MAZE_SIZE - 2, y: MAZE_SIZE - 2 }; // Her zaman son tek indeks
            // Labirentin ba≈ülangƒ±√ß ve biti≈ü noktalarƒ±nƒ± mutlaka yol olarak i≈üaretle
            maze[playerMaze.y][playerMaze.x] = 0;
            maze[exitMaze.y][exitMaze.x] = 0;

            drawMaze();
            mazeGameInfo.textContent = 'Yolu bul!';
            mazeGameStartBtn.style.display = 'none';
            mazeGameResetBtn.style.display = 'block';
            sixSixSixMessage.style.display = 'none'; // 666 mesajƒ±nƒ± gizle

            // Labirent oyun d√∂ng√ºs√ºn√º ba≈ülat (sadece g√∂rsel g√ºncelleme i√ßin)
            if (mazeGameLoopInterval) clearInterval(mazeGameLoopInterval);
            mazeGameLoopInterval = setInterval(drawMaze, 1000 / 30); // 30 FPS
        }

        // Labirent oyunu klavye kontrolleri
        window.addEventListener('keydown', (e) => {
            if (mazeGameModal.style.display === 'flex' && activeModal === mazeGameModal) {
                let newX = playerMaze.x;
                let newY = playerMaze.y;

                if (e.key === 'ArrowUp' || e.key === 'w') {
                    newY--;
                } else if (e.key === 'ArrowDown' || e.key === 's') {
                    newY++;
                } else if (e.key === 'ArrowLeft' || e.key === 'a') {
                    newX--;
                } else if (e.key === 'ArrowRight' || e.key === 'd') {
                    newX++;
                }

                // √áarpƒ±≈üma kontrol√º
                if (newX >= 0 && newX < MAZE_SIZE && newY >= 0 && newY < MAZE_SIZE && maze[newY][newX] === 0) {
                    playerMaze.x = newX;
                    playerMaze.y = newY;
                    drawMaze(); // Oyuncunun yeni konumunu √ßiz

                    // √áƒ±kƒ±≈üa ula≈ütƒ± mƒ± kontrol√º
                    if (playerMaze.x === exitMaze.x && playerMaze.y === exitMaze.y) {
                        mazeGameInfo.textContent = 'TEBRƒ∞KLER! Labireti tamamladƒ±n!';
                        clearInterval(mazeGameLoopInterval); // Oyunu durdur
                        mazeGameResetBtn.textContent = 'Yeni Labirent'; // Buton metnini deƒüi≈ütir
                        // 666 mesajƒ±nƒ± g√∂ster ve gizli notu tetikle
                        sixSixSixMessage.style.display = 'block';
                        setTimeout(() => {
                             showSecretNote("Son Not", "Gelecek hackerƒ±mƒ±z, bu sana son notumuz. √ñleceƒüiz galiba. G√∂r√º≈ü√ºr√ºz.");
                        }, 1500); // 1.5 saniye sonra notu g√∂ster
                    }
                }
            }
        });

        mazeGameIcon.addEventListener('click', () => {
            closeAllModals();
            mazeGameModal.style.display = 'flex';
            startMazeGame(); // Oyunu ba≈ülat
            setActiveModal(mazeGameModal);
        });

        mazeGameCloseBtn.addEventListener('click', () => {
            closeWindow(mazeGameModal);
            if (mazeGameLoopInterval) clearInterval(mazeGameLoopInterval); // Oyunu durdur
            sixSixSixMessage.style.display = 'none'; // 666 mesajƒ±nƒ± gizle
            mazeGameStartBtn.style.display = 'block'; // Ba≈ülat butonunu tekrar g√∂ster
            mazeGameResetBtn.style.display = 'none'; // Reset butonunu gizle
            mazeGameResetBtn.textContent = 'Yeniden Ba≈ülat'; // Buton metnini sƒ±fƒ±rla
        });

        mazeGameStartBtn.addEventListener('click', startMazeGame);
        mazeGameResetBtn.addEventListener('click', startMazeGame);

        // Labirent ve Parkur i√ßin canvas boyutlarƒ±nƒ± ayarlama
        // Sayfa y√ºklendiƒüinde ve pencere boyutlandƒ±ƒüƒ±nda
        window.addEventListener('load', () => {
            // Labirent Canvas
            const mazeSize = MAZE_SIZE * CELL_SIZE; // Canvas boyutunu hesapla
            mazeCanvas.width = mazeSize;
            mazeCanvas.height = mazeSize;
        });

        // Gizli Not Modalƒ± ƒ∞≈ülevselliƒüi
        function showSecretNote(title, message) {
            closeAllModals(); // Diƒüer t√ºm pencereleri kapat
            secretNoteTitle.textContent = title;
            secretNoteText.innerHTML = message; // HTML i√ßeriƒüi olarak ayarla
            secretNoteModal.style.display = 'flex';
            setActiveModal(secretNoteModal);
        }

        closeSecretNoteBtn.addEventListener('click', () => {
            closeWindow(secretNoteModal);
        });


        // --- Hacker Ka√ßƒ±≈ü Oyunu Kodlarƒ± ---
        // Hacker Ka√ßƒ±≈ü Oyunu Deƒüi≈ükenleri
        const HE_GRID_SIZE = 25; // Kare sayƒ±sƒ± (tek sayƒ± tercih edilir)
        const HE_CELL_SIZE = hackerEscapeCanvas.width / HE_GRID_SIZE;
        let heMaze = [];
        let hePlayer = { x: 1, y: 1, size: HE_CELL_SIZE * 0.8, color: 'magenta' }; // Hacker
        let hePolice = []; // Polislar
        let heDots = []; // Veri Paketleri
        let heGameLoopInterval;
        let heGameActive = false;
        let heLevel = 1;

        // Labirent Olu≈üturma (DFS algoritmasƒ±)
        function generateHeMaze(cols, rows) {
            let grid = Array(rows).fill(0).map(() => Array(cols).fill(1)); // 1 = duvar, 0 = yol

            // Dƒ±≈ü kenarlarƒ± duvar yap
            for (let i = 0; i < cols; i++) {
                grid[0][i] = 1;
                grid[rows - 1][i] = 1;
            }
            for (let i = 0; i < rows; i++) {
                grid[i][0] = 1;
                grid[i][cols - 1] = 1;
            }

            let stack = [];
            let startNode = { x: 1, y: 1 };
            grid[startNode.y][startNode.x] = 0;
            stack.push(startNode);

            while (stack.length > 0) {
                let current = stack[stack.length - 1];

                let neighbors = [];
                let directions = [
                    { dx: 0, dy: -2 }, { dx: 2, dy: 0 },
                    { dx: 0, dy: 2 }, { dx: -2, dy: 0 }
                ];

                for (let dir of directions) {
                    let nx = current.x + dir.dx;
                    let ny = current.y + dir.dy;
                    if (nx > 0 && nx < cols - 1 && ny > 0 && ny < rows - 1 && grid[ny][nx] === 1) {
                        neighbors.push({ x: nx, y: ny, wallX: current.x + dir.dx / 2, wallY: current.y + dir.dy / 2 });
                    }
                }

                if (neighbors.length > 0) {
                    let next = neighbors[Math.floor(Math.random() * neighbors.length)];
                    grid[next.y][next.x] = 0;
                    grid[next.wallY][next.wallX] = 0;
                    stack.push(next);
                } else {
                    stack.pop();
                }
            }
            return grid;
        }

        // Veri Paketlerini Yerle≈ütir
        function placeHeDots() {
            heDots = [];
            let dotCount = 0;
            for (let y = 0; y < HE_GRID_SIZE; y++) {
                for (let x = 0; x < HE_GRID_SIZE; x++) {
                    // Oyuncunun ba≈ülangƒ±√ß noktasƒ±nda nokta olmasƒ±n
                    if (heMaze[y][x] === 0 && !(x === hePlayer.x && y === hePlayer.y)) {
                        heDots.push({ x: x, y: y, collected: false });
                        dotCount++;
                    }
                }
            }
            // Dotlar yerle≈ütirilemezse tekrar dene (nadir durumlar i√ßin)
            if (dotCount === 0) {
                setTimeout(placeHeDots, 100); // K√º√ß√ºk bir gecikmeyle tekrar dene
            }
        }

        // Polisleri Yerle≈ütir
        function placeHePolice(numPolice) {
            hePolice = [];
            let placed = 0;
            while (placed < numPolice) {
                let rx = Math.floor(Math.random() * (HE_GRID_SIZE - 2)) + 1;
                let ry = Math.floor(Math.random() * (HE_GRID_SIZE - 2)) + 1;

                // Polisler ba≈ülangƒ±√ßta oyuncudan ve duvarlardan uzakta, ve yol √ºzerinde olsun
                if (heMaze[ry][rx] === 0 && Math.abs(rx - hePlayer.x) > 5 && Math.abs(ry - hePlayer.y) > 5) {
                    let isOccupied = false;
                    // Diƒüer polislerin veya oyuncunun √ºzerinde olmasƒ±n
                    if ((rx === hePlayer.x && ry === hePlayer.y)) {
                        isOccupied = true;
                    }
                    for (const p of hePolice) {
                        if (p.x === rx && p.y === ry) {
                            isOccupied = true;
                            break;
                        }
                    }

                    if (!isOccupied) {
                        hePolice.push({ x: rx, y: ry, size: HE_CELL_SIZE * 0.8, color: 'blue' });
                        placed++;
                    }
                }
            }
        }

        function drawHeGame() {
            heCtx.clearRect(0, 0, hackerEscapeCanvas.width, hackerEscapeCanvas.height);

            // Labirenti √ßiz
            for (let y = 0; y < HE_GRID_SIZE; y++) {
                for (let x = 0; x < HE_GRID_SIZE; x++) {
                    if (heMaze[y][x] === 1) {
                        heCtx.fillStyle = '#222'; // Duvar rengi
                        heCtx.fillRect(x * HE_CELL_SIZE, y * HE_CELL_SIZE, HE_CELL_SIZE, HE_CELL_SIZE);
                    } else {
                        heCtx.fillStyle = '#000'; // Yol rengi
                        heCtx.fillRect(x * HE_CELL_SIZE, y * HE_CELL_SIZE, HE_CELL_SIZE, HE_CELL_SIZE);
                    }
                }
            }

            // Veri paketlerini √ßiz
            heDots.forEach(dot => {
                if (!dot.collected) {
                    heCtx.fillStyle = 'lime';
                    heCtx.beginPath();
                    heCtx.arc(dot.x * HE_CELL_SIZE + HE_CELL_SIZE / 2, dot.y * HE_CELL_SIZE + HE_CELL_SIZE / 2, HE_CELL_SIZE * 0.15, 0, Math.PI * 2);
                    heCtx.fill();
                }
            });

            // Polisi √ßiz (basit kare)
            hePolice.forEach(p => {
                heCtx.fillStyle = p.color;
                heCtx.fillRect(p.x * HE_CELL_SIZE + (HE_CELL_SIZE - p.size) / 2, p.y * HE_CELL_SIZE + (HE_CELL_SIZE - p.size) / 2, p.size, p.size);
            });

            // Hackerƒ± √ßiz (basit kare)
            heCtx.fillStyle = hePlayer.color;
            heCtx.fillRect(hePlayer.x * HE_CELL_SIZE + (HE_CELL_SIZE - hePlayer.size) / 2, hePlayer.y * HE_CELL_SIZE + (HE_CELL_SIZE - hePlayer.size) / 2, hePlayer.size, hePlayer.size);
        }

        // Polislerin hareketi (Basit takip)
        function moveHePolice() {
            hePolice.forEach(p => {
                let dx = hePlayer.x - p.x;
                let dy = hePlayer.y - p.y;

                let possibleMoves = [];
                // Check UP
                if (p.y > 0 && heMaze[p.y - 1][p.x] === 0) possibleMoves.push({ x: p.x, y: p.y - 1, dist: Math.hypot(p.x - hePlayer.x, (p.y - 1) - hePlayer.y) });
                // Check DOWN
                if (p.y < HE_GRID_SIZE - 1 && heMaze[p.y + 1][p.x] === 0) possibleMoves.push({ x: p.x, y: p.y + 1, dist: Math.hypot(p.x - hePlayer.x, (p.y + 1) - hePlayer.y) });
                // Check LEFT
                if (p.x > 0 && heMaze[p.y][p.x - 1] === 0) possibleMoves.push({ x: p.x - 1, y: p.y, dist: Math.hypot((p.x - 1) - hePlayer.x, p.y - hePlayer.y) });
                // Check RIGHT
                if (p.x < HE_GRID_SIZE - 1 && heMaze[p.y][p.x + 1] === 0) possibleMoves.push({ x: p.x + 1, y: p.y, dist: Math.hypot((p.x + 1) - hePlayer.x, p.y - hePlayer.y) });

                if (possibleMoves.length > 0) {
                    // En kƒ±sa mesafeye sahip hareketi se√ß
                    possibleMoves.sort((a, b) => a.dist - b.dist);
                    p.x = possibleMoves[0].x;
                    p.y = possibleMoves[0].y;
                }
            });
        }


        function checkHeCollisions() {
            // Veri paketi toplama
            heDots.forEach(dot => {
                if (!dot.collected && hePlayer.x === dot.x && hePlayer.y === dot.y) {
                    dot.collected = true;
                    hePlayer.score = (hePlayer.score || 0) + 1; // Skor ekle
                    hackerEscapeInfo.textContent = `Seviye: ${heLevel} - Skor: ${hePlayer.score} - Toplanan Veri Paketleri: ${heDots.filter(d => d.collected).length}/${heDots.length}`;
                }
            });

            // T√ºm veri paketleri toplandƒ±ysa sonraki seviyeye ge√ß
            if (heDots.every(dot => dot.collected)) {
                heGameActive = false;
                clearInterval(heGameLoopInterval);
                hackerEscapeInfo.textContent = `Tebrikler! Seviye ${heLevel} tamamlandƒ±!`;
                heLevel++;
                currentPoliceCount = Math.min(heLevel + 1, 6); // Max 6 polis
                setTimeout(() => {
                    startHackerEscapeGame(); // Yeni seviye ba≈ülat
                }, 1500); // 1.5 saniye sonra yeni seviye
            }

            // Polis ile √ßarpƒ±≈üma kontrol√º
            hePolice.forEach(p => {
                if (hePlayer.x === p.x && hePlayer.y === p.y) {
                    heGameActive = false;
                    clearInterval(heGameLoopInterval);
                    hackerEscapeInfo.textContent = `Yakalnadƒ±n! Skor: ${hePlayer.score} - Oyun Bitti!`;
                    hePlayer.color = 'red'; // Hacker kƒ±rmƒ±zƒ±ya d√∂ns√ºn
                    drawHeGame(); // Son durumu √ßiz
                    hePlayer.score = 0; // Skor sƒ±fƒ±rla
                    hackerEscapeStartBtn.style.display = 'block';
                    hackerEscapeResetBtn.style.display = 'none';
                }
            });
        }

        let currentPoliceCount = 2; // Ba≈ülangƒ±√ß polis sayƒ±sƒ±

        function startHackerEscapeGame() {
            clearInterval(heGameLoopInterval); // √ñnceki d√∂ng√ºy√º temizle

            heMaze = generateHeMaze(HE_GRID_SIZE, HE_GRID_SIZE);
            // Oyuncuyu her zaman 1,1'de ba≈ülat
            hePlayer = { x: 1, y: 1, size: HE_CELL_SIZE * 0.8, color: 'magenta', score: hePlayer.score || 0 }; // Skor seviyeler arasƒ± ta≈üƒ±nsƒ±n
            placeHeDots();
            placeHePolice(currentPoliceCount);

            hackerEscapeInfo.textContent = `Seviye: ${heLevel} - Skor: ${hePlayer.score} - Toplanan Veri Paketleri: ${heDots.filter(d => d.collected).length}/${heDots.length}`;
            hackerEscapeStartBtn.style.display = 'none';
            hackerEscapeResetBtn.style.display = 'block';
            heGameActive = true;

            let gameSpeed = Math.max(100, 250 - (heLevel * 10)); // Min hƒ±z 100ms
            heGameLoopInterval = setInterval(() => {
                if (heGameActive) {
                    moveHePolice();
                    checkHeCollisions();
                    drawHeGame();
                }
            }, gameSpeed);
        }

        // Klavye Kontrolleri
        window.addEventListener('keydown', (e) => {
            if (hackerEscapeModal.style.display === 'flex' && activeModal === hackerEscapeModal && heGameActive) {
                let newX = hePlayer.x;
                let newY = hePlayer.y;

                // Mevcut konumunu kaydet (√ßarpƒ±≈üma durumunda geri d√∂nmek i√ßin)
                const originalX = hePlayer.x;
                const originalY = hePlayer.y;

                if (e.key === 'ArrowUp' || e.key === 'w') {
                    newY--;
                } else if (e.key === 'ArrowDown' || e.key === 's') {
                    newY++;
                } else if (e.key === 'ArrowLeft' || e.key === 'a') {
                    newX--;
                } else if (e.key === 'ArrowRight' || e.key === 'd') {
                    newX++;
                }

                // Labirent i√ßinde ve duvar olmayan yere hareket et
                if (newX >= 0 && newX < HE_GRID_SIZE && newY >= 0 && newY < HE_GRID_SIZE && heMaze[newY][newX] === 0) {
                    hePlayer.x = newX;
                    hePlayer.y = newY;
                    checkHeCollisions(); // Her hareketten sonra √ßarpƒ±≈ümalarƒ± kontrol et
                    drawHeGame(); // Oyuncunun yeni konumunu √ßiz
                } else {
                    // Eƒüer hareket ge√ßerli deƒüilse, orijinal konumunda kal
                    hePlayer.x = originalX;
                    hePlayer.y = originalY;
                }
            }
        });


        // --- Olay Dinleyicileri ---
        hackerEscapeIcon.addEventListener('click', () => {
            closeAllModals(); // Diƒüer t√ºm pencereleri kapat
            hackerEscapeModal.style.display = 'flex';
            setActiveModal(hackerEscapeModal);
            // Oyunu sƒ±fƒ±rla ve ba≈ülangƒ±√ß ekranƒ±nƒ± g√∂ster
            heLevel = 1; // Seviyeyi sƒ±fƒ±rla
            currentPoliceCount = 2; // Polis sayƒ±sƒ±nƒ± sƒ±fƒ±rla
            hePlayer.score = 0; // Skoru sƒ±fƒ±rla
            heGameActive = false;
            clearInterval(heGameLoopInterval);
            heCtx.clearRect(0, 0, hackerEscapeCanvas.width, hackerEscapeCanvas.height); // Canvas'ƒ± temizle
            hackerEscapeInfo.textContent = 'Veri Paketlerini Topla!';
            hackerEscapeStartBtn.style.display = 'block';
            hackerEscapeResetBtn.style.display = 'none';
        });

        hackerEscapeCloseBtn.addEventListener('click', () => {
            closeWindow(hackerEscapeModal);
            if (heGameLoopInterval) clearInterval(heGameLoopInterval);
            heGameActive = false; // Oyunu kapatƒ±rken oyun durumunu sƒ±fƒ±rla
        });

        hackerEscapeStartBtn.addEventListener('click', () => {
            heLevel = 1; // Ba≈ülangƒ±√ß seviyesini sƒ±fƒ±rla
            currentPoliceCount = 2; // Polis sayƒ±sƒ±nƒ± sƒ±fƒ±rla
            hePlayer.score = 0; // Skoru sƒ±fƒ±rla
            startHackerEscapeGame();
        });

        hackerEscapeResetBtn.addEventListener('click', () => {
            heLevel = 1; // Yeniden ba≈ülatƒ±rken seviyeyi sƒ±fƒ±rla
            currentPoliceCount = 2; // Polis sayƒ±sƒ±nƒ± sƒ±fƒ±rla
            hePlayer.score = 0; // Skoru sƒ±fƒ±rla
            startHackerEscapeGame();
        });


        // --- Paint Uygulamasƒ± Kodlarƒ± ---
        let isDrawing = false;
        let lastX = 0;
        let lastY = 0;
        let brushColor = '#000000';
        let brushSize = 5;
        let currentTool = 'pencil'; // 'pencil' veya 'eraser'

        function setupPaintCanvas() {
            // Canvas'ƒ± beyaz renkle doldur
            paintCtx.fillStyle = 'white';
            paintCtx.fillRect(0, 0, paintCanvas.width, paintCanvas.height);
        }

        function draw(e) {
            if (!isDrawing) return;

            paintCtx.beginPath();
            paintCtx.moveTo(lastX, lastY);

            // Canvas'ƒ±n konumu ve boyutunu al
            const rect = paintCanvas.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;

            paintCtx.lineTo(mouseX, mouseY);
            paintCtx.strokeStyle = currentTool === 'pencil' ? brushColor : 'white';
            paintCtx.lineWidth = brushSize;
            paintCtx.lineCap = 'round'; // Kalem ucunu yuvarlak yap
            paintCtx.lineJoin = 'round'; // √áizgi birle≈üimlerini yuvarlak yap
            paintCtx.stroke();

            [lastX, lastY] = [mouseX, mouseY];
        }

        // Event Listeners for Paint Canvas
        paintCanvas.addEventListener('mousedown', (e) => {
            isDrawing = true;
            const rect = paintCanvas.getBoundingClientRect();
            [lastX, lastY] = [e.clientX - rect.left, e.clientY - rect.top];
        });
        paintCanvas.addEventListener('mousemove', draw);
        paintCanvas.addEventListener('mouseup', () => isDrawing = false);
        paintCanvas.addEventListener('mouseout', () => isDrawing = false); // Canvas dƒ±≈üƒ±na √ßƒ±kƒ±nca √ßizimi durdur

        // Paint Tool Buttons
        toolPencilBtn.addEventListener('click', () => {
            currentTool = 'pencil';
            paintCanvas.style.cursor = 'crosshair';
            paintToolBtns.forEach(btn => btn.classList.remove('active'));
            toolPencilBtn.classList.add('active');
        });
        toolEraserBtn.addEventListener('click', () => {
            currentTool = 'eraser';
            paintCanvas.style.cursor = 'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiI+PHBhdGggZD0iTTEzLjUsMi41QzE0LjQsMS42LDE1LDEsMTUuNSwwLjVMNCw1LjVsMC41LTAuNUwxNCw1TDExLjUsMi41WiIgZmlsbD0iYmxhY2siLz48L3N2Zz4="), auto'; // Silgi imleci
            paintToolBtns.forEach(btn => btn.classList.remove('active'));
            toolEraserBtn.classList.add('active');
        });
        toolClearBtn.addEventListener('click', () => {
            paintCtx.clearRect(0, 0, paintCanvas.width, paintCanvas.height);
            setupPaintCanvas(); // Tuvali tekrar beyazla doldur
        });

        // Brush Size and Color
        paintBrushSize.addEventListener('input', (e) => {
            brushSize = e.target.value;
        });
        paintColorPicker.addEventListener('input', (e) => {
            brushColor = e.target.value;
        });

        // Paint Icon Click
        paintIcon.addEventListener('click', () => {
            closeAllModals();
            paintWindow.style.display = 'flex';
            setActiveModal(paintWindow);
            setupPaintCanvas(); // Her a√ßƒ±ldƒ±ƒüƒ±nda canvas'ƒ± sƒ±fƒ±rla
            // Boyut deƒüi≈üirse canvas'ƒ± yeniden boyutlandƒ±r
            // resizeObserver.observe(paintWindow); // Sadece Paint penceresini dinle
        });

        // Close Paint Button
        closePaintBtn.addEventListener('click', () => {
            closeWindow(paintWindow);
            // resizeObserver.unobserve(paintWindow); // Dinlemeyi bƒ±rak
        });

        // Pencere boyutlandƒ±ƒüƒ±nda Canvas'ƒ±n boyutunu dinamik olarak ayarla
        // PaintCanvasContainer i√ßindeki bo≈üluklarƒ± hesaplayarak
        const resizePaintCanvas = () => {
            const container = document.getElementById('paint-canvas-container');
            if (container && paintCanvas) {
                const currentImageData = paintCtx.getImageData(0, 0, paintCanvas.width, paintCanvas.height); // Mevcut √ßizimi kaydet

                const newWidth = container.clientWidth - 2; // Kenarlƒ±klar i√ßin -2
                const newHeight = container.clientHeight - 2;

                if (paintCanvas.width !== newWidth || paintCanvas.height !== newHeight) {
                    paintCanvas.width = newWidth;
                    paintCanvas.height = newHeight;
                    paintCtx.putImageData(currentImageData, 0, 0); // Kaydedilen √ßizimi geri y√ºkle
                    setupPaintCanvas(); // Temizle ve beyazla doldur
                }
            }
        };

        // ResizeObserver kullanarak Paint penceresinin boyut deƒüi≈üikliklerini dinle
        const resizeObserver = new ResizeObserver(entries => {
            for (let entry of entries) {
                if (entry.target === paintWindow) {
                    resizePaintCanvas();
                }
            }
        });

        // Paint penceresi a√ßƒ±ldƒ±ƒüƒ±nda g√∂zlemlemeye ba≈üla
        paintIcon.addEventListener('click', () => {
            closeAllModals();
            paintWindow.style.display = 'flex';
            setActiveModal(paintWindow);
            setupPaintCanvas(); // Her a√ßƒ±ldƒ±ƒüƒ±nda canvas'ƒ± sƒ±fƒ±rla
            resizePaintCanvas(); // A√ßƒ±ldƒ±ƒüƒ±nda boyutu ayarla
            resizeObserver.observe(paintWindow); // Boyut deƒüi≈üikliklerini dinle
        });

        // Paint penceresi kapandƒ±ƒüƒ±nda g√∂zlemlemeyi bƒ±rak
        closePaintBtn.addEventListener('click', () => {
            closeWindow(paintWindow);
            resizeObserver.unobserve(paintWindow); // Dinlemeyi bƒ±rak
        });

        // --- Not Defteri Uygulamasƒ± Kodlarƒ± ---
        notepadIcon.addEventListener('click', () => {
            closeAllModals();
            notepadWindow.style.display = 'flex';
            setActiveModal(notepadWindow);
            
            // Not: textarea'nƒ±n ilk hali bo≈ü olmalƒ±, eƒüer ho≈ü geldin mesajƒ± sadece a√ßƒ±lƒ±≈üta g√∂r√ºnmeli ise.
            // Kullanƒ±cƒ± yazmaya ba≈üladƒ±ƒüƒ±nda renk normalle≈üsin.
            notepadTextarea.value = "Ho≈ü Geldin!\n\n"; // Metin olarak ekle

            // Ba≈ülangƒ±√ß stili
            notepadTextarea.style.color = 'lime';
            notepadTextarea.style.fontFamily = 'Press Start 2P, cursive';
            notepadTextarea.style.fontWeight = 'bold';

            // Kullanƒ±cƒ± yazmaya ba≈üladƒ±ƒüƒ±nda stili sƒ±fƒ±rla
            let welcomeMessageWritten = false;
            const resetNotepadStyle = () => {
                if (!welcomeMessageWritten) {
                    notepadTextarea.style.color = '#333'; // Varsayƒ±lan metin rengi
                    notepadTextarea.style.fontFamily = 'Segoe UI, Arial, sans-serif';
                    notepadTextarea.style.fontWeight = 'normal';
                    welcomeMessageWritten = true;
                    notepadTextarea.removeEventListener('input', resetNotepadStyle);
                }
            };
            notepadTextarea.addEventListener('input', resetNotepadStyle);

            notepadTextarea.focus();
            notepadTextarea.setSelectionRange(0, 0); // ƒ∞mleci en ba≈üa getir
            notepadTextarea.scrollTop = 0; // Ba≈üa kaydƒ±r
        });

        closeNotepadBtn.addEventListener('click', () => {
            closeWindow(notepadWindow);
            // Kapatƒ±rken varsayƒ±lan stillere sƒ±fƒ±rla (bir sonraki a√ßƒ±lƒ±≈ü i√ßin)
            notepadTextarea.style.color = '#333';
            notepadTextarea.style.fontFamily = 'Segoe UI, Arial, sans-serif';
            notepadTextarea.style.fontWeight = 'normal';
        });

        // --- Kart Oyunu (Memory Game) Kodlarƒ± ---
        const KARKONC_CHARS = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H']; // 8 farklƒ± karakter
        let cards = [];
        let flippedCards = [];
        let matchedPairs = 0;
        let totalPairs = KARKONC_CHARS.length;
        let lockBoard = false; // Kartlar √ßevrilirken diƒüer tƒ±klamalarƒ± engelle

        // Zamanlayƒ±cƒ± deƒüi≈ükenleri
        let cardGameStartTime;
        let cardGameTimerInterval;
        let cardGameTimeout; // E≈üle≈ümeyen kartlarƒ± kapatma timeout'u

        // Kartlarƒ± Karƒ±≈ütƒ±r
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Oyun Tahtasƒ±nƒ± Olu≈ütur
        function createGameBoard() {
            cardGameBoard.innerHTML = ''; // Tahtayƒ± temizle
            cards = [];
            flippedCards = [];
            matchedPairs = 0;
            cardGameInfo.textContent = 'E≈üle≈üen kartlarƒ± bul!';

            const cardValues = [...KARKONC_CHARS, ...KARKONC_CHARS]; // Her karakterden 2 tane
            const shuffledValues = shuffle(cardValues);

            shuffledValues.forEach((value, index) => {
                const cardElement = document.createElement('div');
                cardElement.classList.add('card');
                cardElement.dataset.value = value;
                cardElement.dataset.index = index;

                cardElement.innerHTML = `
                    <div class="front-face">${value}</div>
                    <div class="back-face">?</div>
                `;
                cardElement.addEventListener('click', () => flipCard(cardElement));
                cardGameBoard.appendChild(cardElement);
                cards.push(cardElement);
            });
        }

        // Kartƒ± √áevir
        function flipCard(card) {
            if (lockBoard) return;
            if (card === flippedCards[0]) return; // Aynƒ± karta tekrar tƒ±klanƒ±rsa

            card.classList.add('flipped');
            flippedCards.push(card);

            if (flippedCards.length === 2) {
                lockBoard = true; // Diƒüer tƒ±klamalarƒ± engelle
                cardGameTimeout = setTimeout(checkForMatch, 1000); // 1 saniye sonra e≈üle≈üme kontrol√º
            }
        }

        // E≈üle≈üme Kontrol√º
        function checkForMatch() {
            const [card1, card2] = flippedCards;
            const isMatch = card1.dataset.value === card2.dataset.value;

            if (isMatch) {
                disableCards();
            } else {
                unflipCards();
            }
        }

        // E≈üle≈üen Kartlarƒ± Devre Dƒ±≈üƒ± Bƒ±rak
        function disableCards() {
            const [card1, card2] = flippedCards;
            card1.classList.add('matched');
            card2.classList.add('matched');
            card1.removeEventListener('click', flipCard);
            card2.removeEventListener('click', flipCard);

            matchedPairs++;
            if (matchedPairs === totalPairs) {
                cardGameInfo.textContent = 'Tebrikler! T√ºm kartlarƒ± e≈üle≈ütirdin!';
                clearInterval(cardGameTimerInterval); // Zamanlayƒ±cƒ±yƒ± durdur
                cardGameResetBtn.textContent = 'Yeni Oyun';
            }
            resetBoard();
        }

        // E≈üle≈ümeyen Kartlarƒ± Geri √áevir
        function unflipCards() {
            const [card1, card2] = flippedCards;
            card1.classList.remove('flipped');
            card2.classList.remove('flipped');
            resetBoard();
        }

        // Tahtayƒ± Sƒ±fƒ±rla
        function resetBoard() {
            flippedCards = [];
            lockBoard = false;
        }

        // Oyunu Ba≈ülat
        function startCardGame() {
            createGameBoard();
            cardGameStartBtn.style.display = 'none';
            cardGameResetBtn.style.display = 'block';
            cardGameInfo.textContent = 'E≈üle≈üen kartlarƒ± bul!';
            
            // Kartlarƒ± kƒ±sa bir s√ºre g√∂ster, sonra kapat
            cards.forEach(card => card.classList.add('flipped'));
            setTimeout(() => {
                cards.forEach(card => card.classList.remove('flipped'));
                cardGameInfo.textContent = 'Ba≈üla!';
                lockBoard = false; // Oyuncunun ba≈ülamasƒ± i√ßin kiliti a√ß
                startCardGameTimer(); // Zamanlayƒ±cƒ±yƒ± ba≈ülat
            }, 2000); // 2 saniye sonra kartlar kapanƒ±r
        }

        // Zamanlayƒ±cƒ±yƒ± ba≈ülat
        function startCardGameTimer() {
            cardGameStartTime = Date.now();
            if (cardGameTimerInterval) clearInterval(cardGameTimerInterval);
            cardGameTimerInterval = setInterval(() => {
                const elapsedTime = Math.floor((Date.now() - cardGameStartTime) / 1000);
                cardGameInfo.textContent = `Ge√ßen S√ºre: ${elapsedTime}s - E≈üle≈üen: ${matchedPairs}/${totalPairs}`;
            }, 1000);
        }

        // Kart Oyunu ƒ∞kon Tƒ±klamasƒ±
        cardGameIcon.addEventListener('click', () => {
            closeAllModals();
            cardGameModal.style.display = 'flex';
            setActiveModal(cardGameModal);
            // Oyunu ba≈ülangƒ±√ß durumuna getir
            cardGameBoard.innerHTML = ''; // Tahtayƒ± temizle
            cardGameInfo.textContent = 'E≈üle≈üen kartlarƒ± bul!';
            cardGameStartBtn.style.display = 'block';
            cardGameResetBtn.style.display = 'none';
            if (cardGameTimerInterval) clearInterval(cardGameTimerInterval); // Zamanlayƒ±cƒ±yƒ± durdur
            if (cardGameTimeout) clearTimeout(cardGameTimeout); // Bekleyen timeout'larƒ± temizle
            flippedCards = [];
            matchedPairs = 0;
            lockBoard = false;
        });

        // Kart Oyunu Kapatma Butonu
        closeCardGameBtn.addEventListener('click', () => {
            closeWindow(cardGameModal);
            if (cardGameTimerInterval) clearInterval(cardGameTimerInterval);
            if (cardGameTimeout) clearTimeout(cardGameTimeout);
        });

        // Kart Oyunu Ba≈ülat/Sƒ±fƒ±rla Butonlarƒ±
        cardGameStartBtn.addEventListener('click', startCardGame);
        cardGameResetBtn.addEventListener('click', startCardGame); // Yeniden ba≈ülat butonu da oyunu sƒ±fƒ±rlayƒ±p ba≈ülatƒ±r


    </script>
</body>
</html>